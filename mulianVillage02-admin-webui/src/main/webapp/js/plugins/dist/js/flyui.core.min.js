/*! 简单易用的组件库 v1.0.0 | by huanzhang & ueteam | (c) 2015 iFlytek, Inc. | Licensed under MIT | 2015-11-06 09:11:07 UTC */ 
!function e(t,n,i){function r(a,o){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!o&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";function i(e){var t,n,r,s,a,o,l,u={};for(l=e.match(M),t=0,n=l.length;n>t;t++)r=l[t],s=r.indexOf(":"),a=r.substring(0,s),o=r.substring(s+1),"{"==o.charAt(0)&&(o=i(o)),u[a]=o;return u}function r(e,t,n){var i,r={};for(i in e)r[i]=new n(t,e[i]);return r}function s(e){var t,n,i=[];for(e[0]||(e=[g.ui]),t=0,n=e.length;n>t;t++)i[t]=e[t].roles;return b.extend.apply(null,[{}].concat(i.reverse()))}function a(e,t,n,s){var l,u,c,d=e.getAttribute("data-role"),f=e.getAttribute("data-bind"),p=e.children,g=[],_=!0,m={};if(s=s||[t],(d||f)&&o(e),d&&(c=h(e,n)),f&&(f=i(f.replace(q,"")),c||(m=v.parseEleOptions(e,{textField:"",valueField:"",template:"",valueUpdate:"change",valuePrimitive:!1,autoBind:!0}),m.roles=n,c=new V(e,m)),c.source=t,u=r(f,s,j),u.click&&(f.events=f.events||{},f.events.click=f.click,u.click.destroy(),delete u.click),u.source&&(_=!1),f.attr&&(u.attr=r(f.attr,s,j)),f.style&&(u.style=r(f.style,s,j)),f.events&&(u.events=r(f.events,s,L)),f.css&&(u.css=r(f.css,s,j)),c.bind(u)),c&&(e.flyBindingTarget=c),_&&p){for(l=0;l<p.length;l++)g[l]=p[l];for(l=0;l<g.length;l++)a(g[l],t,n,s)}}function o(e){var t=e.flyBindingTarget;t&&(t.destroy(),H?delete e.flyBindingTarget:e.removeAttribute?e.removeAttribute("flyBindingTarget"):e.flyBindingTarget=null)}function l(e){o(e),u(e)}function u(e){var t=e.children;if(t)for(var n=0,i=t.length;i>n;n++)l(t[n])}function c(e,t){var n,i=s([].slice.call(arguments,2));b(e).each(function(){n=b(this)[0],1===n.nodeType&&a(n,t,i)})}function d(e,t){var n=e.element,i=n[0].flyBindingTarget;i&&c(n,i.source,t)}function f(e,t){var n,i,r=[],s=0;if(!t)return e;if(e instanceof x){for(n=e.length;n>s;s++)i=e[s],r[s]=i.get?i.get(t):i[t];e=r}else e instanceof w&&(e=e.get(t));return e}function h(e,t){var n=g.ui.initWidget(e,{},t);return n?new W(n):void 0}function p(e,t,n){return U.extend({ctor:function(e,t,n){var i=this;i._super(e.element[0],t,n),i.widget=e,i._dataBinding=C(i.dataBinding,i),i._dataBound=C(i.dataBound,i),i._itemChange=C(i.itemChange,i)},itemChange:function(t){a(t.item[0],t.data,this._ns(t.ns),[t.data].concat(this.bindings[e]._parents()))},dataBinding:function(e){var t,n,i=this.widget,r=e.removedItems||i.items();for(t=0,n=r.length;n>t;t++)l(r[t])},_ns:function(e){return e=e||g.ui,s([e])},dataBound:function(n){var i,r,s,o,l=this.widget,u=n.addedItems||l.items(),c=l[t];if(u.length)for(s=n.addedDataItems||c.view(),o=this.bindings[e]._parents(),i=0,r=s.length;r>i;i++)a(u[i],s[i],this._ns(n.ns),[s[i]].concat(o))},refresh:function(i){var r,s=this,a=s.widget;i=i||{},i.action||(s.destroy(),a.bind("dataBinding",s._dataBinding),a.bind("dataBound",s._dataBound),a.bind("itemChange",s._itemChange),r=s.bindings[e].get(),a[t]instanceof _.DataSource&&a[t]!=r&&(r instanceof _.DataSource?a[n](r):r&&r._dataSource?a[n](r._dataSource):(a[t].data(r),s.bindings.value&&(a instanceof y.Select||a instanceof y.MultiSelect)&&a.value(f(s.bindings.value.get(),a.options.dataValueField)))))},destroy:function(){var e=this.widget;e.unbind("dataBinding",this._dataBinding),e.unbind("dataBound",this._dataBound),e.unbind("itemChange",this._itemChange)}})}var g=e("./fly.core"),v=e("./fly.utils"),_=e("./fly.data"),m=e("./fly.template"),y=e("./fly.ui"),b=(e("./fly.list"),e("./fly.format"),g.$),w=_.ObservableObject,x=_.ObservableArray,S={},T={widget:S},C=b.proxy,I={}.toString,k="function",O="number",D="change",$="value",E="source",F="events",P="checked",N="css",B="disabled",z="readonly",A="[object Date]",M=/[A-Za-z0-9_\-]+:(\{([^}]*)\}|[^,}]+)/g,q=/\s/g,H=function(){var e=document.createElement("a");try{delete e.test}catch(t){return!1}return!0}(),R=function(e,t,n){if(t){if(I.call(e)===A)return formatDate(e,t,n);if(typeof e===O)return formatNumber(e,t,n)}return void 0!==e?e:""},j=g.Observable.extend({ctor:function(e,t){var n=this;n._super(),n.source=e&&e[0],n.parents=e,n.path=t,n.dependencies={},n.dependencies[t]=!0,n.observable=n.source instanceof g.Observable,n._access=function(e){n.dependencies[e.field]=!0},n.observable&&(n._change=function(e){n.change(e)},n.source.bind(D,n._change))},_parents:function(){var e=this.parents,t=this.get();if(t&&typeof t.parent==k){var n=t.parent();b.inArray(n,e)<0&&(e=[n].concat(e))}return e},change:function(e){var t,n,i=e.field,r=this;if("this"===r.path)r.trigger(D,e);else for(t in r.dependencies)if(0===t.indexOf(i)&&(n=t.charAt(i.length),!n||"."===n||"["===n)){r.trigger(D,e);break}},start:function(e){e.bind("get",this._access)},stop:function(e){e.unbind("get",this._access)},get:function(){var e=this,t=e.source,n=0,i=e.path,r=t;if(!e.observable)return r;for(e.start(e.source),r=t.get(i);void 0===r&&t;)t=e.parents[++n],t instanceof w&&(r=t.get(i));if(void 0===r)for(t=e.source;void 0===r&&t;)t=t.parent(),t instanceof w&&(r=t.get(i));return typeof r===k&&(n=i.lastIndexOf("."),n>0&&(t=t.get(i.substring(0,n))),e.start(t),r=t!==e.source?r.call(t,e.source):r.call(t),e.stop(t)),t&&t!==e.source&&(e.currentSource=t,t.unbind(D,e._change).bind(D,e._change)),e.stop(e.source),r},set:function(e){var t=this.currentSource||this.source,n=g.getter(this.path)(t);typeof n===k?t!==this.source?n.call(t,this.source,e):n.call(t,e):t.set(this.path,e)},destroy:function(){this.observable&&(this.source.unbind(D,this._change),this.currentSource&&this.currentSource.unbind(D,this._change)),this.unbind()}}),L=j.extend({get:function(){var e,t=this.source,n=this.path,i=0;for(e=t.get(n);!e&&t;)t=this.parents[++i],t instanceof w&&(e=t.get(n));return C(e,t)}}),V=(j.extend({ctor:function(e,t,n){this._super(e,t),this.template=n},render:function(e){var t;return this.start(this.source),t=m(this.template,e),this.stop(this.source),t}}),g.Class.extend({ctor:function(e,t){this.target=e,this.options=t,this.toDestroy=[]},bind:function(e){var t,n,i,r,s,a,o=this instanceof W,l=this.binders();for(t in e)t==$?n=!0:t==E?i=!0:t==F?r=!0:t==P?s=!0:t!=N||o?this.applyBinding(t,e,l):a=!0;i&&this.applyBinding(E,e,l),n&&this.applyBinding($,e,l),s&&this.applyBinding(P,e,l),r&&this.applyBinding(F,e,l),a&&!o&&this.applyBinding(N,e,l)},binders:function(){return T[this.target.nodeName.toLowerCase()]||{}},applyBinding:function(e,t,n){var i,r=n[e]||T[e],s=this.toDestroy,a=t[e];if(r)if(r=new r(this.target,t,this.options),s.push(r),a instanceof j)r.bind(a),s.push(a);else for(i in a)r.bind(a,i),s.push(a[i]);else if("template"!==e)throw new Error("The "+e+" binding is not supported by the "+this.target.nodeName.toLowerCase()+" element")},destroy:function(){var e,t,n=this.toDestroy;for(e=0,t=n.length;t>e;e++)n[e].destroy()}})),W=V.extend({binders:function(){return S[this.target.name.toLowerCase()]||{}},applyBinding:function(e,t,n){var i,r=n[e]||S[e],s=this.toDestroy,a=t[e];if(!r)throw new Error("The "+e+" binding is not supported by the "+this.target.name+" widget");if(r=new r(this.target,t,this.target.options),s.push(r),a instanceof j)r.bind(a),s.push(a);else for(i in a)r.bind(a,i),s.push(a[i])}}),U=g.Class.extend({ctor:function(e,t,n){this.element=e,this.bindings=t,this.options=n},bind:function(e,t){var n=this;e=t?e[t]:e,e.bind(D,function(e){n.refresh(t||e)}),n.refresh(t)},destroy:function(){}}),J=U.extend({dataType:function(){var e=this.element.getAttribute("data-type")||this.element.type||"text";return e.toLowerCase()},parsedValue:function(){return this._parseValue(this.element.value,this.dataType())},_parseValue:function(e,t){return"date"==t?e=g.parseDate(e,"yyyy-MM-dd"):"datetime"==t?e=g.parseDate(e,"yyyy-MM-dd HH:mm:ss"):"number"==t?e=parseFloat(e):"boolean"==t&&(e=e.toLowerCase(),e=NaN!==parseFloat(e)?Boolean(parseFloat(e)):"true"===e),e}});T.attr=U.extend({refresh:function(e){this.element.setAttribute(e,this.bindings.attr[e].get())}}),T.css=U.extend({ctor:function(e,t,n){this._super(e,t,n),this.classes={}},refresh:function(e){var t=b(this.element),n=this.bindings.css[e],i=this.classes[e]=n.get();i?t.addClass(e):t.removeClass(e)}}),T.style=U.extend({refresh:function(e){this.element.style[e]=this.bindings.style[e].get()||""}}),T.enabled=U.extend({refresh:function(){this.bindings.enabled.get()?this.element.removeAttribute(B):this.element.setAttribute(B,B)}}),T.readonly=U.extend({refresh:function(){this.bindings.readonly.get()?this.element.setAttribute(z,z):this.element.removeAttribute(z)}}),T.disabled=U.extend({refresh:function(){this.bindings.disabled.get()?this.element.setAttribute(B,B):this.element.removeAttribute(B)}}),T.events=U.extend({ctor:function(e,t,n){this._super(e,t,n),this.handlers={}},refresh:function(e){var t=b(this.element),n=this.bindings.events[e],i=this.handlers[e];i&&t.off(e,i),i=this.handlers[e]=n.get(),t.on(e,n.source,i)},destroy:function(){var e,t=b(this.element);for(e in this.handlers)t.off(e,this.handlers[e])}}),T.text=U.extend({refresh:function(){var e=this.bindings.text.get(),t=this.element.getAttribute("data-format")||"";null==e&&(e=""),b(this.element).text(R(e,t))}}),T.visible=U.extend({refresh:function(){this.bindings.visible.get()?this.element.style.display="":this.element.style.display="none"}}),T.invisible=U.extend({refresh:function(){this.bindings.invisible.get()?this.element.style.display="none":this.element.style.display=""}}),T.html=U.extend({refresh:function(){this.element.innerHTML=this.bindings.html.get()}}),T.value=J.extend({ctor:function(e,t,n){this._super(e,t,n),this._change=C(this.change,this),this.eventName=n.valueUpdate||D,b(this.element).on(this.eventName,this._change),this._initChange=!1},change:function(){this._initChange=this.eventName!=D,this.bindings[$].set(this.parsedValue()),this._initChange=!1},refresh:function(){if(!this._initChange){var e=this.bindings[$].get();null==e&&(e="");var t=this.dataType();"date"==t?e=R(e,"yyyy-MM-dd"):"datetime-local"==t&&(e=R(e,"yyyy-MM-ddTHH:mm:ss")),this.element.value=e}this._initChange=!1},destroy:function(){b(this.element).off(this.eventName,this._change)}}),T.source=U.extend({ctor:function(e,t,n){this._super(e,t,n);this.bindings.source.get()},refresh:function(e){var t=this,n=t.bindings.source.get();n instanceof x?(e=e||{},"add"==e.action?t.add(e.index,e.items):"remove"==e.action?t.remove(e.index,e.items):("itemchange"==e.action||void 0===e.action)&&t.render()):t.render()},container:function(){var e=this.element;return"table"==e.nodeName.toLowerCase()&&(e.tBodies[0]||e.appendChild(document.createElement("tbody")),e=e.tBodies[0]),e},template:function(){var e=this.options,t=e.template,n=this.container().nodeName.toLowerCase();return t?t=m.renderFile(t):(t="select"==n?e.valueField||e.textField?'<option value="{{'+e.valueField||e.textField+'}}">'+e.textField||e.valueField+"</option>":"<option>{{data}}</option>":"tbody"==n?"<tr><td>{{data}}</td></tr>":"ul"==n||"ol"==n?"<li>{{data}}</li>":"{{data}}",t=m.compiler(t)),t},add:function(e,t){var n,i,r,s,o=this.container(),l=o.cloneNode(!1),u=o.children[e];if(b(l).html(this.template()(t)),l.children.length)for(n=this.bindings.source._parents(),i=0,r=t.length;r>i;i++)s=l.children[0],o.insertBefore(s,u||null),a(s,t[i],this.options.roles,[t[i]].concat(n))},remove:function(e,t){var n,i=this.container();for(n=0;n<t.length;n++){var r=i.children[e];l(r),i.removeChild(r)}},render:function(){var e,t,n,i=this.bindings.source.get(),r=this.container(),s=this.template();if(i=i.toJSON(),this.bindings.template){if(u(r),b(r).html(this.bindings.template.render(i)),r.children.length)for(e=this.bindings.source._parents(),t=0,n=i.length;n>t;t++)a(r.children[t],i[t],this.options.roles,[i[t]].concat(e))}else b(r).html(s(i))}}),S.events=U.extend({ctor:function(e,t,n){this._super(e.element[0],t,n),this.widget=e,this.handlers={}},refresh:function(e){var t=this.bindings.events[e],n=this.handlers[e];n&&this.widget.unbind(e,n),n=t.get(),this.handlers[e]=function(e){e.data=t.source,n(e),e.data===t.source&&delete e.data},this.widget.bind(e,this.handlers[e])},destroy:function(){var e;for(e in this.handlers)this.widget.unbind(e,this.handlers[e])}}),S.checked=U.extend({ctor:function(e,t,n){this._super(e.element[0],t,n),this.widget=e,this._change=C(this.change,this),this.widget.bind(D,this._change)},change:function(){this.bindings[P].set(this.value())},refresh:function(){this.widget.check(this.bindings[P].get()===!0)},value:function(){var e=this.element,t=e.value;return("on"==t||"off"==t)&&(t=e.checked),t},destroy:function(){this.widget.unbind(D,this._change)}}),S.visible=U.extend({ctor:function(e,t,n){this._super(e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.visible.get();this.widget.wrapper[0].style.display=e?"":"none"}}),S.invisible=U.extend({ctor:function(e,t,n){this._super(e.element[0],t,n),this.widget=e},refresh:function(){var e=this.bindings.invisible.get();this.widget.wrapper[0].style.display=e?"none":""}}),S.enabled=U.extend({ctor:function(e,t,n){this._super(e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(this.bindings.enabled.get())}}),S.disabled=U.extend({ctor:function(e,t,n){this._super(e.element[0],t,n),this.widget=e},refresh:function(){this.widget.enable&&this.widget.enable(!this.bindings.disabled.get())}}),S.source=p("source","dataSource","setDataSource"),S.value=U.extend({ctor:function(e,t,n){this._super(e.element[0],t,n),this.widget=e,this._change=C(this.change,this),this.widget.first(D,this._change);var i=this.bindings.value.get();this._valueIsObservableObject=!n.valuePrimitive&&(null==i||i instanceof w),this._valueIsObservableArray=i instanceof x,this._initChange=!1},change:function(){var e,t,n,i,r,s,a,o=this.widget.value(),l=this.options.dataValueField||this.options.dataTextField,u="[object Array]"===R.call(o),c=this._valueIsObservableObject,d=[];if(this._initChange=!0,l)if(this.bindings.source&&(a=this.bindings.source.get()),""===o&&(c||this.options.valuePrimitive))o=null;else{for(u&&(t=o.length,d=o.slice(0)),r=0,s=a.length;s>r;r++)if(n=a[r],i=n.get(l),u){for(e=0;t>e;e++)if(i==d[e]){d[e]=n;break}}else if(i==o){o=c?n:i;break}d[0]&&(o=this._valueIsObservableArray?d:c||!l?d[0]:d[0].get(l))}this.bindings.value.set(o),this._initChange=!1},refresh:function(){if(!this._initChange){var e,t=this.widget,n=this.options.dataTextField,i=this.options.dataValueField||n,r=this.bindings.value.get(),s=this.options.text||"",a=0,o=[];if(void 0===r&&(r=null),i)if(r instanceof x){for(e=r.length;e>a;a++)o[a]=r[a].get(i);r=o}else r instanceof w&&(s=r.get(n),r=r.get(i));t.options.autoBind===!1&&t.listView&&!t.listView.isBound()?(n!==i||s||(s=r),t._preselect(r,s)):t.value(r)}this._initChange=!1},destroy:function(){this.widget.unbind(D,this._change)}}),g.bind=c,g.notify=d,t.exports=c},{"./fly.core":5,"./fly.data":7,"./fly.format":9,"./fly.list":10,"./fly.template":15,"./fly.ui":16,"./fly.utils":17}],2:[function(e,t,n){"use strict";var i=e("./fly.core"),r={},s=function(e){var t;try{t=e.toString().split(".")[1].length}catch(n){t=0}return t},a=function(e){return Number(e.toString().replace(".",""))};r.add=function(e,t){var n=Math.max(s(e),s(t)),i=Math.pow(10,n);return(a(e)*i+a(t)*i)/i},r.sub=function(e,t){var n=Math.max(s(e),s(t)),i=Math.pow(10,n);return(a(e)*i-a(t)*i)/i},r.mul=function(e,t){var n=s(e)+s(t),i=Math.pow(10,n);return a(e)*a(t)/i},r.div=function(e,t){var n=s(t)-s(e),i=Math.pow(10,n);return a(e)/a(t)*i},i.calc=r,t.exports=r},{"./fly.core":5}],3:[function(e,t,n){var i=e("./fly.core"),r=function(){},s="ctor",a="extend",o="function";r.extend=function(e){function t(){this.ctor.apply(this,arguments)}var n=this.prototype,i=new this;for(var r in e)i[r]=r==s&&typeof e[r]==o&&typeof n[r]==o?function(e,t){return function(){var i=this._super;this._super=n[e];var r=t.apply(this,arguments);return this._super=i,r}}(r,e[r]):e[r];for(var l in this)this.hasOwnProperty(l)&&l!=a&&(t[l]=this[l]);if(t.prototype=i,t.prototype._super=new this,e.statics)for(var r in e.statics)e.statics.hasOwnProperty(r)&&(t[r]=e.statics[r],r==s&&t[r]());return t.prototype.constructor=t,t.extendPrototype=function(e){for(var t in e)i[t]=e[t]},t.fn=t.prototype,t.extend=arguments.callee,t},i.Class=r,t.exports=r},{"./fly.core":5}],4:[function(e,t,n){"use strict";var i=e("./fly.core"),r=i.$,s=r.map,a={},o=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,l=/^(rgb|RGB)\(([0-9]{0,3}\s*,\s*){2}[0-9]{0,3}\)/,u=/(?:\(|\)|rgb|RGB|\s)*/g,c=function(e){var e=e.toLowerCase(),t=[];if(!e||!o.test(e))return e;e=e.slice(1),3==e.length&&(e=s(e,function(e){return e+e}).join(""));for(var n=0;6>n;n+=2)t.push(parseInt("0x"+e.slice(n,n+2)));return t},d=function(e){var t="#";if(l.test(e)){var n=e.replace(u,"").split(",");t+=s(n,function(e){return("00"+Number(e).toString(16)).slice(-2)}).join("")}else o.test(e)?4==e.length&&(t+=s(e.slice(-3),function(e){return e+e}).join("")):t=e;return t};a.lighten=function(e,t){var n=c(e),i=numberPercent(t),r=s(n,function(e,t){return parseInt(e+(255-e)*i)});return d("rgb("+r.join(",")+")")},a.darken=function(e,t){var n=c(e),i=numberPercent(t),r=s(n,function(e,t){return parseInt(e+(0-e)*i)});return d("rgb("+r.join(",")+")")},i.color=a,t.exports=a},{"./fly.core":5}],5:[function(e,t,n){(function(e){"use strict";function n(e,t,n,i){return"string"==typeof e&&(isFunction(t)&&(i=t,t=400,n=!1),isFunction(n)&&(i=n,n=!1),typeof t===BOOLEAN&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:i}),r.extend({effects:{},duration:400,reverse:!1,init:r.noop,teardown:r.noop,hide:!1},e,{completeCallback:e.complete,complete:r.noop})}function i(e,t,i,s,a){for(var o,u=0,c=e.length;c>u;u++)o=r(e[u]),o.queue(function(){l.promise(o,n(t,i,s,a))});return e}var r="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,s=window.fly=window.fly||{},a="js/flyui";s.$=r,s.$win=r(window),s.$doc=r(document),s.$html=r("html"),s.version="1.0.1",s.keys={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},s.NS="fly";var o,l={},u={};u.mutationobserver=window.MutationObserver||window.WebKitMutationObserver||null,u.html5=function(){return"email"===s.$('<input type="email" />').attr("type")}(),u.touch="ontouchstart"in document||e.DocumentTouch&&document instanceof e.DocumentTouch||e.navigator.msPointerEnabled&&e.navigator.msMaxTouchPoints>0||e.navigator.pointerEnabled&&e.navigator.maxTouchPoints>0||!1,u.scrollbar=function(e){if(!isNaN(o)&&!e)return o;var t,n=document.createElement("div");return n.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",n.innerHTML="&nbsp;",document.body.appendChild(n),t=n.offsetWidth-n.scrollWidth,document.body.removeChild(n),t},s.ie6=r.browser.msie&&"6.0"==r.browser.version,s.path=function(e,t,n,i,r){for(n in e)e[n].src&&-1!==e[n].src.indexOf(t)&&(i=e[n]);return r=i||e[e.length-1],i=r.src.replace(/\\/g,"/"),i.lastIndexOf("/")<0?".":i.substring(0,i.lastIndexOf(t))}(document.getElementsByTagName("script"),a),s.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}).toUpperCase()},s.identity=function(e){return e},r.extend(l,{enabled:!0,Element:function(e){this.element=r(e)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),l.promiseShim=l.promise,r.extend(r.fn,{flyStop:function(e,t){return this.stop(e,t)},flyAnimate:function(e,t,n,r){return i(this,e,t,n,r)}}),s.support=u,t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){t.exports=null},{}],7:[function(e,t,n){"use strict";function i(e,t){var n,i=e.length,r=new Array(i);for(n=0;i>n;n++)r[n]=t(e[n],n,e);return r}function r(e,t){if(e){var n=typeof e===X?{field:e,dir:t}:e,i=H(n)?n:void 0!==n?[n]:[];return R(i,function(e){return!!e.dir})}}function s(e){var t,n,i,r,a=e.filters;if(a)for(t=0,n=a.length;n>t;t++)i=a[t],r=i.operator,r&&typeof r===X&&(i.operator=le[r.toLowerCase()]||r),s(i)}function a(e){return e&&!z(e)?((H(e)||!e.filters)&&(e={logic:"and",filters:H(e)?e:[e]}),s(e),e):void 0}function o(e,t,n,i,r){var s,a,o,l,u;for(l=0,u=e.length;u>l;l++){s=e[l];for(a in t)o=r[a],o&&o!==a&&(s[o]=t[a](s),delete s[a])}}function l(e,t,n,i,r){var s,a,o,l,u;for(l=0,u=e.length;u>l;l++){s=e[l];for(a in t)s[a]=n._parse(a,t[a](s)),o=r[a],o&&o!==a&&delete s[o]}}function u(e,t,n,i,r,s){return function(a){return a=e(a),a&&!z(i)&&(toString.call(a)===oe||a instanceof O||(a=[a]),n(a,i,new t,r,s)),a||[]}}function c(e,t,n,i){for(var r=0;r<e.length&&e[r].data!==t&&!d(e[r].data,n,i);r++);}function d(e,t,n){for(var i=0,r=e.length;r>i;i++)if(e[i]===t||e[i]===n)return e[i]=n,!0}function f(e,t,n,i){for(var r=0,s=e.length;s>r;r++){var a=e[r];if(a&&!(a instanceof i))for(var o=0;o<t.length;o++)if(t[o]===a){e[r]=t.at(o),c(n,t,a,e[r]);break}}}function h(e,t){var n,i;for(n=0,i=e.length;i>n;n++){var r=e.at(n);if(r.uid==t.uid)return e.splice(n,1),r}}function p(e,t){return t?v(e,function(e){return e.uid?e.uid==t.uid:e[t.idField]===t.id}):-1}function g(e,t){return t?v(e,function(e){return e.uid==t.uid}):-1}function v(e,t){var n,i;for(n=0,i=e.length;i>n;n++)if(t(e[n]))return n;return-1}function _(e,t){if(e&&!z(e)){var n,i=e[t];return n=A(i)?i.from||i.field||t:e[t]||t,M(n)?t:n}return t}function m(e,t){var n,i,r={};for(var s in e)"filters"!==s&&(r[s]=e[s]);if(e.filters)for(r.filters=[],n=0,i=e.filters.length;i>n;n++)r.filters[n]=m(e.filters[n],t);else r.field=_(t.fields,r.field);return r}function y(e,t){var n,i,r,s,a=[];for(n=0,i=e.length;i>n;n++){r={},s=e[n];for(var o in s)r[o]=s[o];r.field=_(t.fields,r.field),a.push(r)}return a}function b(e,t){var n,i,r,s,a,o=F(e)[0].children,l=[],u=t[0],c=t[1];for(n=0,i=o.length;i>n;n++)r={},a=o[n],a.disabled||(r[u.field]=a.text,s=a.attributes.value,s=s&&s.specified?a.value:a.text,r[c.field]=s,l.push(r));return l}function w(e){this.data=e||[]}var x=e("./fly.core"),S=(e("./fly.observable"),e("./fly.model")),T=(e("./fly.format"),e("./fly.utils")),C=x.Class,I=x.Observable,k=x.ObservableObject,O=x.ObservableArray,D=x.LazyObservableArray,$=x.identity,E=x.getter,F=x.$,P=F.each,N=F.proxy,B=F.extend,z=F.isEmptyObject,A=F.isPlainObject,M=F.isFunction,q=F.isNumeric,H=F.isArray,R=F.grep,j=F.noop,L=F.Deferred,V=F.ajax,W=[].slice,U=Math,J={},G="function",X="string",Y="change",Z="create",Q="read",K="update",ee="destroy",te="error",ne="requestStart",ie="progress",re="requestEnd",se="empty",ae=[Z,Q,K,ee],oe="[object Array]",le={"==":"eq","!=":"neq","<":"lt","<=":"lte",">":"gt",">=":"gte",notsubstringof:"doesnotcontain"},ue=/^\/Date\((.*?)\)\/$/,ce=/(\r+|\n+)/g,de=/(?=['\\])/g,fe=function(){function e(e){return e.replace(de,"\\").replace(ce,"")}function t(t,n,i,r){var s;return null!=i&&(typeof i===X&&(i=e(i),s=ue.exec(i),s?i=new Date(+s[1]):r?(i="'"+i.toLowerCase()+"'",n="("+n+" || '').toLowerCase()"):i="'"+i+"'"),i.getTime&&(n="("+n+"?"+n+".getTime():"+n+")",i=i.getTime())),n+" "+t+" "+i}return{quote:function(t){return t&&t.getTime?"new Date("+t.getTime()+")":"string"==typeof t?"'"+e(t)+"'":""+t},eq:function(e,n,i){return t("==",e,n,i)},neq:function(e,n,i){return t("!=",e,n,i)},gt:function(e,n,i){return t(">",e,n,i)},gte:function(e,n,i){return t(">=",e,n,i)},lt:function(e,n,i){return t("<",e,n,i)},lte:function(e,n,i){return t("<=",e,n,i)},startswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".lastIndexOf('"+n+"', 0) == 0"},endswith:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"', "+t+".length - "+(n||"").length+") >= 0"},contains:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') >= 0"},doesnotcontain:function(t,n,i){return i&&(t="("+t+" || '').toLowerCase()",n&&(n=n.toLowerCase())),n&&(n=e(n)),t+".indexOf('"+n+"') == -1"}}}(),he={selector:function(e){return M(e)?e:E(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),null==e&&null==n?0:null==e?-1:null==n?1:e.localeCompare?e.localeCompare(n):e>n?1:n>e?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return"desc"==e.dir?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var i,r,s=e[0](t,n);for(i=1,r=e.length;r>i;i++)s=s||e[i](t,n);return s}}},pe=I.extend({ctor:function(e){var t,n,i=this;e&&(n=e.data,H(n)&&void 0==e.server&&(e.server=!1,e.currentPageNo=!1),e=i.options=B({},i.options,e),i._map={},i._prefetch={},i._data=[],i._pristineData=[],i._ranges=[],i._view=[],i._pristineTotal=0,i._destroyed=[],i._pageSize=e.pageSize,i._page=e.page||(e.pageSize?1:void 0),i._sort=r(e.sort),i._filter=a(e.filter),i._total=e.total,i._shouldDetachObservableParents=!0,i._super(),i.transport=_e.create(n,i),M(i.transport.push)&&i.transport.push({pushCreate:N(i._pushCreate,i),pushUpdate:N(i._pushUpdate,i),pushDestroy:N(i._pushDestroy,i)}),i.reader=new ve(e.schema),t=i.reader.model||{},i._detachObservableParents(),i._data=i._observe(i._data),i._online=!0,i.bind(["push",te,Y,ne,re,ie],e))},options:{data:null,schema:{modelBase:S},server:!0,currentPageNo:!0,batch:!1,parse:$},_pushCreate:function(e){this._push(e,"pushCreate")},_pushUpdate:function(e){this._push(e,"pushUpdate")},_pushDestroy:function(e){this._push(e,"pushDestroy")},_push:function(e,t){var n=this._readData(e);n||(n=e),this[t](n)},_flatData:function(e,t){if(e&&!t)for(var n=0;n<e.length;n++)e.at(n);return e},parent:j,get:function(e){var t,n,i=this._flatData(this._data);for(t=0,n=i.length;n>t;t++)if(i[t].id==e)return i[t]},getByUid:function(e){var t,n,i=this._flatData(this._data);if(i)for(t=0,n=i.length;n>t;t++)if(i[t].uid==e)return i[t]},getByUids:function(e){var t=this,n=[];return P(e,function(e,i){n.push(t.getByUid(i))}),n},indexOf:function(e){return g(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var t=this;if(void 0===e){if(t._data)for(var n=0;n<t._data.length;n++)t._data.at(n);return t._data}t._detachObservableParents(),t._data=this._observe(e),t._pristineData=e.slice(0),t._storeData(),t._ranges=[],t.trigger("reset"),t._addRange(t._data),t._total=t._data.length,t._pristineTotal=t._total,t._process(t._data)},_index:function(e){var t=this.skip()||0;return P(e,function(e,n){void 0!=n&&null!=n&&(n._index=t+e+1)}),e},view:function(e){return void 0===e?this._view:void(this._view=this._observeView(e))},_observeView:function(e){var t=this;f(e,t._data,t._ranges,t.reader.model||k,!1);var n=new D(e,t.reader.model);return n.parent=function(){return t.parent()},n},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof k?e:new k(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof S||(t=this._createNewModel(t)),this._data.splice(e,0,t),t},pushCreate:function(e){H(e)||(e=[e]);var t=[],n=this.options.autoSync;this.options.autoSync=!1;try{for(var i=0;i<e.length;i++){var r=e[i],s=this.add(r);t.push(s);var a=s.toJSON();this._pristineData.push(a)}}finally{this.options.autoSync=n}t.length&&this.trigger("push",{type:"create",items:t})},pushUpdate:function(e){H(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++){var i=e[n],r=this._createNewModel(i),s=this.get(r.id);s?(t.push(s),s.accept(i),s.trigger(Y),this._updatePristineForModel(s,i)):this.pushCreate(i)}t.length&&this.trigger("push",{type:"update",items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger("push",{type:"destroy",items:t})},_removeItems:function(e){H(e)||(e=[e]);var t=[],n=this.options.autoSync;this.options.autoSync=!1;try{for(var i=0;i<e.length;i++){var r=e[i],s=this._createNewModel(r),a=!1;this._eachItem(this._data,function(e){for(var n=0;n<e.length;n++){var i=e.at(n);if(i.id===s.id){t.push(i),e.splice(n,1),a=!0;break}}}),a&&(this._removePristineForModel(s),this._destroyed.pop())}}finally{this.options.autoSync=n}return t},remove:function(e){var t=this;return this._eachItem(t._data,function(t){h(t,e)}),this._removeModelFromRanges(e),this._updateRangesLength(),e},destroyed:function(){return this._destroyed},created:function(){var e,t,n=[],i=this._flatData(this._data);for(e=0,t=i.length;t>e;e++)i[e].isNew&&i[e].isNew()&&n.push(i[e]);return n},updated:function(){var e,t,n=[],i=this._flatData(this._data);for(e=0,t=i.length;t>e;e++)i[e].isNew&&!i[e].isNew()&&i[e].dirty&&n.push(i[e]);return n},cancelChanges:function(e){var t=this;e instanceof S?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.server&&(t._total=t._pristineTotal),t._ranges=[],t._addRange(t._data),t._change())},hasChanges:function(){var e,t,n=this._flatData(this._data);if(this._destroyed.length)return!0;for(e=0,t=n.length;t>e;e++)if(n[e].isNew&&n[e].isNew()||n[e].dirty)return!0;return!1},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,n){B(!0,n[e],t)})},_executeOnPristineForModel:function(e,t){this._eachPristineItem(function(n){var i=p(n,e);return i>-1?(t(i,n),!0):void 0})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){var t=this.reader.data;return t.call(this.reader,e)},_eachPristineItem:function(e){this._eachItem(this._pristineData,e)},_eachItem:function(e,t){e&&e.length&&t(e)},_pristineForModel:function(e){var t,n,i=function(i){return n=p(i,e),n>-1?(t=i[n],!0):void 0};return this._eachPristineItem(i),t},_cancelModel:function(e){var t=this._pristineForModel(e);this._eachItem(this._data,function(n){var i=g(n,e);i>=0&&(!t||e.isNew()&&!t.__state__?n.splice(i,1):n[i].accept(t))})},read:function(e){var t=this,n=t._params(e),i=L();return t._queueRequest(n,function(){var e=t.trigger(ne,{type:"read"});e?(t._dequeueRequest(),i.resolve(e)):(t.trigger(ie),t._ranges=[],t.trigger("reset"),t._online&&t.transport.read({data:n,success:function(e){t.success(e),i.resolve()},parse:function(e){return t.options.parse(e)},error:function(){var e=W.call(arguments);t.error.apply(t,e),i.reject.apply(i,e)}}))}),i.promise()},success:function(e){var t=this;t.options;if(t.trigger(re,{response:e,type:"read"}),t._online){if(e=t.reader.parse(e),t._handleCustomErrors(e))return void t._dequeueRequest();t._total=t.reader.total(e),e=t._readData(e)}else{e=t._readData(e);for(var n=[],i=0;i<e.length;i++){var r=e[i],s=r.__state__;"destroy"==s?this._destroyed.push(this._createNewModel(r)):n.push(r)}e=n,t._total=e.length}t._pristineTotal=t._total,t._pristineData=e.slice(0),t._detachObservableParents(),t._data=t._observe(e),t._storeData(),t._addRange(t._data),t._process(t._data),t._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;e<this._data.length;e++)this._data[e].parent&&(this._data[e].parent=j)},_storeData:function(e){this.options.server,this.reader.model},_addRange:function(e){var t=this,n=t._skip||0,i=n+t._flatData(e,!0).length;t._ranges.push({start:n,end:i,data:e}),t._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(re,{}),this.trigger(te,{xhr:e,status:t,errorThrown:n})},_params:function(e){var t=this,n=t.options.currentPageNo?{currentPageNo:t.page()}:{take:t.take(),skip:t.skip(),page:t.page()},i=B(n,{pageSize:t.pageSize(),sort:t._sort},e);return t.options.server||(t.options.pageSize||(delete i.take,delete i.skip),delete i.page,delete i.pageSize,delete i.currentPageNo),t.options.server?t.reader.model&&i.filter&&(i.filter=m(i.filter,t.reader.model)):delete i.filter,
t.options.server?t.reader.model&&i.sort&&(i.sort=y(i.sort,t.reader.model)):delete i.sort,i},_queueRequest:function(e,t){var n=this;n._requestInProgress?n._pending={callback:N(t,n),options:e}:(n._requestInProgress=!0,n._pending=void 0,t())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){var t=this.reader.errors(e);return t?(this.trigger(t==se?se:te,{xhr:null,status:"customerror",errorThrown:"custom error",errors:t}),!0):!1},_observe:function(e){var t=this,n=t.reader.model,i=!1;if(t._shouldDetachObservableParents=!0,n&&e.length&&(i=!(e[0]instanceof n)),e instanceof O)t._shouldDetachObservableParents=!1,i&&(e.type=t.reader.model,e.wrapAll(e,e));else{var r=t.pageSize()&&!t.options.server?D:O;e=new r(e,t.reader.model),e.parent=function(){return t.parent()}}return t._changeHandler&&t._data&&t._data instanceof O?t._data.unbind(Y,t._changeHandler):t._changeHandler=N(t._change,t),e.bind(Y,t._changeHandler)},_change:function(e){var t,n,i=this,r=e?e.action:"";if("remove"===r)for(t=0,n=e.items.length;n>t;t++)e.items[t].isNew&&e.items[t].isNew()||i._destroyed.push(e.items[t]);var s=parseInt(i._total,10);q(i._total)||(s=parseInt(i._pristineTotal,10)),"add"===r?s+=e.items.length:"remove"===r?s-=e.items.length:"itemchange"===r||"sync"===r||i.options.server?"sync"===r&&(s=i._pristineTotal=parseInt(i._total,10)):s=i._pristineTotal,i._total=s,i._process(i._data,e)},_process:function(e,t){var n,i=this,r={};i.options.server!==!0&&(r.skip=i._skip,r.take=i._take||i._pageSize,void 0===r.skip&&void 0!==i._page&&void 0!==i._pageSize&&(r.skip=(i._page-1)*i._pageSize)),i.options.server!==!0&&(r.sort=i._sort,r.filter=i._filter),n=i._queryProcess(e,r),i.view(i._index(n.data)),void 0===n.total||i.options.server||(i._total=n.total),t=t||{},t.items=t.items||i._view,i.trigger(Y,t)},_queryProcess:function(e,t){return w.process(e,t)},_mergeState:function(e){var t=this,n=t.options.currentPageNo;return void 0!==e&&(t._pageSize=e.pageSize,t._page=e.page,t._sort=e.sort,t._filter=e.filter,t._skip=e.skip,t._take=e.take,void 0===t._skip&&(t._skip=t.skip(),e.skip=t.skip()),n||void 0!==t._take||void 0===t._pageSize||(t._take=t._pageSize,e.take=t._take),e.sort&&(t._sort=e.sort=r(e.sort)),e.filter&&(t.options.server?(t._filter=a(e.filter),delete e.filter,t._filter&&P(t._filter.filters,function(t,n){e[n.field]=n.value})):t._filter=e.filter=a(e.filter)),n&&(e.currentPageNo=t._page,delete e.page,delete e.take,delete e.skip)),e},query:function(e){var t,n=this.options.server;if(n||(void 0===this._data||0===this._data.length)&&!this._destroyed.length)return this.read(this._mergeState(e));var i=this.trigger(ne,{type:"read"});return i||(this.trigger(ie),t=this._queryProcess(this._data,this._mergeState(e)),n||(void 0!==t.total?this._total=t.total:this._total=this._data.length),this.view(this._index(t.data)),this.trigger(re,{type:"read"}),this.trigger(Y,{items:t.data})),L().resolve(i).promise()},fetch:function(e){var t=this,n=function(n){n!==!0&&M(e)&&e.call(t)};return this._query().then(n)},_query:function(e){var t=this;return t.query(B({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter()},e))},next:function(e){var t=this,n=t.page(),i=t.total();return e=e||{},!n||i&&n+1>t.totalPages()?void 0:(t._skip=n*t.take(),n+=1,e.page=n,t._query(e),n)},prev:function(e){var t=this,n=t.page();return e=e||{},n&&1!==n?(t._skip=t._skip-t.take(),n-=1,e.page=n,t._query(e),n):void 0},page:function(e){var t,n=this;return void 0!==e?(e=this.options.total===!1?U.max(e,1):U.max(U.min(U.max(e,1),n.totalPages()),1),void n._query({page:e})):(t=n.skip(),void 0!==t?U.round((t||0)/(n.take()||1))+1:void 0)},pageSize:function(e){var t=this;return void 0!==e?void t._query({pageSize:e,page:1}):t.take()},sort:function(e){var t=this;return void 0!==e?void t._query({sort:e}):t._sort},filter:function(e){var t=this;return void 0===e?t._filter:(t._query({filter:e,page:1}),void t.trigger("reset"))},total:function(){return parseInt(this._total||0,10)},totalPages:function(){var e=this,t=e.pageSize()||e.total();return U.ceil((e.total()||0)/t)},inRange:function(e,t){var n=this,i=U.min(e+t,n.total());return!n.options.server&&n._data.length>0?!0:n._findRange(e,i).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},range:function(e,t){e=U.min(e||0,this.total());var n,i=this,r=U.max(U.floor(e/t),0)*t,s=U.min(r+t,i.total());if(i._skipRequestsInProgress=!1,n=i._findRange(e,U.min(e+t,i.total())),n.length){i._skipRequestsInProgress=!0,i._pending=void 0,i._skip=e>i.skip()?U.min(s,(i.totalPages()-1)*i.take()):r,i._take=t;var a=i.options.server;try{i.options.server=!0,a&&(i._detachObservableParents(),i._data=n=i._observe(n)),i._process(n)}finally{i.options.server=a}}else void 0!==t&&(i._rangeExists(r,s)?e>r&&i.prefetch(s,t,function(){i.range(e,t)}):i.prefetch(r,t,function(){e>r&&s<i.total()&&!i._rangeExists(s,U.min(s+t,i.total()))?i.prefetch(s,t,function(){i.range(e,t)}):i.range(e,t)}))},_findRange:function(e,t){var n,i,s,a,o,l,u,c,d,f,h,p=this,g=p._ranges,v=[],_=p.options,m=_.server;for(i=0,h=g.length;h>i;i++)if(n=g[i],e>=n.start&&e<=n.end){for(f=0,s=i;h>s;s++)if(n=g[s],d=p._flatData(n.data,!0),d.length&&e+f>=n.start){if(l=n.data,u=n.end,!m){var y=r(p.sort()||[]);c=p._queryProcess(n.data,{sort:y,filter:p.filter()}),d=l=c.data,void 0!==c.total&&(u=c.total)}if(a=0,e+f>n.start&&(a=e+f-n.start),o=d.length,u>t&&(o-=u-t),f+=o-a,v=v.concat(l.slice(a,o)),t<=n.end&&f==t-e)return v}break}return[]},skip:function(){var e=this;return void 0===e._skip?void 0!==e._page?(e._page-1)*(e.take()||1):void 0:e._skip},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n,i){var r=this;return function(s){var a,o,l,u=!1,c={start:e,end:t,data:[]};if(r._dequeueRequest(),r.trigger(re,{response:s,type:"read"}),s=r.reader.parse(s),l=r._readData(s),l.length){for(a=0,o=r._ranges.length;o>a;a++)if(r._ranges[a].start===e){u=!0,c=r._ranges[a];break}u||r._ranges.push(c)}c.data=r._observe(l),c.end=c.start+r._flatData(c.data,!0).length,r._ranges.sort(function(e,t){return e.start-t.start}),r._total=r.reader.total(s),(i||!r._skipRequestsInProgress)&&(n&&l.length?n():r.trigger(Y,{}))}},prefetch:function(e,t,n){var i=this,r=U.min(e+t,i.total()),s=B(i.options.currentPageNo?{currentPageNo:e/t+1}:{take:t,skip:e,page:e/t+1},{pageSize:t,sort:i._sort,filter:i._filter});i._rangeExists(e,r)?n&&n():(clearTimeout(i._timeout),i._timeout=setTimeout(function(){i._queueRequest(s,function(){i.trigger(ne,{type:"read"})?i._dequeueRequest():i.transport.read({data:i._params(s),success:i._prefetchSuccessHandler(e,r,n),error:function(){var e=W.call(arguments);i.error.apply(i,e)}})})},100))},_rangeExists:function(e,t){var n,i,r=this,s=r._ranges;for(n=0,i=s.length;i>n;n++)if(s[n].start<=e&&s[n].end>=t)return!0;return!1},_removeModelFromRanges:function(e){for(var t,n,i,r=0,s=this._ranges.length;s>r&&(i=this._ranges[r],this._eachItem(i.data,function(i){t=h(i,e),t&&(n=!0)}),!n);r++);},_updateRangesLength:function(){for(var e,t,n=0,i=0,r=this._ranges.length;r>i;i++)e=this._ranges[i],e.start=e.start-n,t=this._flatData(e.data,!0).length,n=e.end-t,e.end=e.start+t}});pe.create=function(e){(H(e)||e instanceof O)&&(e={data:e});var t,n,i,r=e||{},s=r.data,a=r.fields,o=r.select,l={};if(!s&&a&&!r.transport&&o&&(s=b(o,a)),S&&a&&(!r.schema||!r.schema.model)){for(t=0,n=a.length;n>t;t++)i=a[t],i.type&&(l[i.field]=i);z(l)||(r.schema=B(!0,r.schema,{model:{fields:l}}))}return r.data=s,r instanceof pe?r:new pe(r)};var ge=C.extend({ctor:function(){this._store={}},add:function(e,t){void 0!==e&&(this._store[stringify(e)]=t)},find:function(e){return this._store[stringify(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[stringify(e)]}});ge.create=function(e){var t={inmemory:function(){return new ge}};return A(e)&&M(e.find)?e:e===!0?new ge:t[e]()};var ve=C.extend({ctor:function(e){var t,n,i,r,s=this;e=e||{};for(t in e)n=e[t],s[t]=typeof n===X?E(n):n;r=e.modelBase||S,A(s.model)&&(s.model=i=r.define(s.model));var a=N(s.data,s);if(s._dataAccessFunction=a,s.model){var c,d=N(s.serialize,s),f={},h={},p={},g={},v=!1;i=s.model,i.fields&&(P(i.fields,function(e,t){var n;c=e,A(t)&&t.field?c=t.field:typeof t===X&&(c=t),A(t)&&t.from&&(n=t.from),v=v||n&&n!==e||c!==e,h[e]=E(n||c),p[e]=E(e),f[n||c]=e,g[e]=n||c}),!e.serialize&&v&&(s.serialize=u(d,i,o,p,f,g))),s._dataAccessFunction=a,s.data=u(a,i,l,h,f,g)}},errors:function(e){return e?e.errors:null},parse:function(e){return e&&(0==e.length||e.rows&&0==e.rows.length)&&(e.errors=se),e},data:function(e){return e&&void 0!=e.rows?e.rows:e},total:function(e){return e&&void 0!=e.total?e.total:e.length},serialize:function(e){return e}});w.filterExpr=function(e){var t,n,i,r,s,a,o=[],l={and:" && ",or:" || "},u=[],c=[],d=e.filters;for(t=0,n=d.length;n>t;t++)i=d[t],s=i.field,a=i.operator,i.filters?(r=w.filterExpr(i),i=r.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,"__o["+(c.length+t)+"]"}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,"__f["+(u.length+t)+"]"}),c.push.apply(c,r.operators),u.push.apply(u,r.fields)):(typeof s===G?(r="__f["+u.length+"](d)",u.push(s)):r=x.expr(s),typeof a===G?(i="__o["+c.length+"]("+r+", "+fe.quote(i.value)+")",c.push(a)):i=fe[(a||"eq").toLowerCase()](r,i.value,void 0!==i.ignoreCase?i.ignoreCase:!0)),o.push(i);return{expression:"("+o.join(l[e.logic])+")",fields:u,operators:c}},w.normalizeFilter=a,w.prototype={toArray:function(){return this.data},range:function(e,t){return new w(this.data.slice(e,e+t))},skip:function(e){return new w(this.data.slice(e))},take:function(e){return new w(this.data.slice(0,e))},select:function(e){return new w(i(this.data,e))},order:function(e,t){var n={dir:t};return e&&(e.compare?n.compare=e.compare:n.field=e),new w(this.data.slice(0).sort(he.create(n)))},orderBy:function(e){return this.order(e,"asc")},orderByDescending:function(e){return this.order(e,"desc")},sort:function(e,t,n){var i,s,a=r(e,t),o=[];if(n=n||he,a.length){for(i=0,s=a.length;s>i;i++)o.push(n.create(a[i]));return this.orderBy({compare:n.combine(o)})}return this},filter:function(e){var t,n,i,r,s,o,l,u,c=this.data,d=[];if(e=a(e),!e||0===e.filters.length)return this;for(r=w.filterExpr(e),o=r.fields,l=r.operators,s=u=new Function("d, __f, __o","return "+r.expression),(o.length||l.length)&&(u=function(e){return s(e,o,l)}),t=0,i=c.length;i>t;t++)n=c[t],u(n)&&d.push(n);return new w(d)}},w.process=function(e,t){t=t||{};var n,i=new w(e),s=r(t.sort||[]),a=t.filterCallback,o=t.filter,l=t.skip,u=t.take;return o&&(i=i.filter(o),a&&(i=a(i)),n=i.toArray().length),s&&(i=i.sort(s)),void 0!==l&&void 0!==u&&(i=i.range(l,u)),{total:n,data:i.toArray()}};var _e={};_e.create=function(e,t){var n,i={};return H(e)||!e?n=new me({data:e||[]}):(i.read=typeof e===X?{url:e}:e,i.read.url=T.url(i.read.url),t&&(i.dataSource=t),n=M(i.read)?i:new ye(i)),n};var me=C.extend({ctor:function(e){this.data=e.data},read:function(e){var t=[];if(e.take&&e.skip)for(var n=0;n<e.take;n++)t.push(this.data[e.skip+n]);else t=this.data;e.success(t)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),ye=C.extend({ctor:function(e){var t,n=this;e=n.options=B({},n.options,e),P(ae,function(t,n){typeof e[n]===X&&(e[n]={url:e[n]})}),n.cache=e.cache?ge.create(e.cache):{find:j,add:j},t=e.parameterMap,M(e.push)&&(n.push=e.push),n.push||(n.push=$),n.parameterMap=M(t)?t:function(e){var n={};return P(e,function(e,i){e in t&&(e=t[e],A(e)&&(i=e.value(i),e=e.key)),n[e]=i}),n}},options:{parameterMap:$},create:function(e){return V(this.setup(e,Z))},read:function(e){var t,n,i,r=this,s=r.cache;e=r.setup(e,Q),t=e.success||j,n=e.error||j,i=s.find(e.data),void 0!==i?t(i):(e.success=function(n){n=e.parse?e.parse(n):n,s.add(e.data,n),t(n)},V(e))},update:function(e){return V(this.setup(e,K))},destroy:function(e){return V(this.setup(e,ee))},setup:function(e,t){e=e||{};var n,i=this,r=i.options[t],s=M(r.data)?r.data(e.data):r.data;return e=B(!0,{},r,e),n=B(!0,{},s,e.data),e.data=i.parameterMap(n,t),M(e.url)&&(e.url=e.url(n)),e}});B(J,{Query:w,DataSource:pe,LocalTransport:me,RemoteTransport:ye,Cache:ge,DataReader:ve,Model:S}),x.dataSource=function(e){return e instanceof pe||(e=new pe(e)),e},x.data=J,t.exports=J},{"./fly.core":5,"./fly.format":9,"./fly.model":11,"./fly.observable":12,"./fly.utils":17}],8:[function(e,t,n){"use strict";var i=e("./fly.core"),r=i.$,s=i.$win,a=i.$doc,o=r.proxy,l=i.support.touch,u=document.documentElement,c=!i.ie6&&"onlosecapture"in u,d="setCapture"in u,f={start:l?"touchstart":"mousedown",over:l?"touchmove":"mousemove",end:l?"touchend":"mouseup"},h=l?function(e){return e.touches||(e=e.originalEvent.touches.item(0)),e}:function(e){return e},p=function(){this.start=o(this.start,this),this.over=o(this.over,this),this.end=o(this.end,this),this.onstart=this.onover=this.onend=r.noop};p.types=f,p.prototype={start:function(e){return e=this.startFix(e),a.on(f.over,this.over).on(f.end,this.end),this.onstart(e),!1},over:function(e){return e=this.overFix(e),this.onover(e),!1},end:function(e){return e=this.endFix(e),a.off(f.over,this.over).off(f.end,this.end),this.onend(e),!1},startFix:function(e){return e=h(e),this.target=r(e.target),this.selectstart=function(){return!1},a.on("selectstart",this.selectstart).on("dblclick",this.end),c?this.target.on("losecapture",this.end):s.on("blur",this.end),d&&this.target[0].setCapture(),e},overFix:function(e){return e=h(e)},endFix:function(e){return e=h(e),a.off("selectstart",this.selectstart).off("dblclick",this.end),c?this.target.off("losecapture",this.end):s.off("blur",this.end),d&&this.target[0].releaseCapture(),e}},p.create=function(e,t){var n,i,o,l,u=r(e),c=new p,d=p.types.start,f=function(){},h=e.className.replace(/^\s|\s.*/g,"")+"-drag-start",g={onstart:f,onover:f,onend:f,off:function(){u.off(d,c.start)}};return c.onstart=function(t){var r="fixed"===u.css("position"),c=a.scrollLeft(),d=a.scrollTop(),f=u.width(),p=u.height();n=0,i=0,o=r?s.width()-f+n:a.width()-f,l=r?s.height()-p+i:a.height()-p;var v=u.offset(),_=this.startLeft=r?v.left-c:v.left,m=this.startTop=r?v.top-d:v.top;this.clientX=t.clientX,this.clientY=t.clientY,u.addClass(h),g.onstart.call(e,t,_,m)},c.onover=function(t){var r=t.clientX-this.clientX+this.startLeft,s=t.clientY-this.clientY+this.startTop,a=u[0].style;r=Math.max(n,Math.min(o,r)),s=Math.max(i,Math.min(l,s)),a.left=r+"px",a.top=s+"px",g.onover.call(e,t,r,s)},c.onend=function(t){var n=u.position(),i=n.left,r=n.top;u.removeClass(h),g.onend.call(e,t,i,r)},c.off=function(){u.off(d,c.start)},t?c.start(t):u.on(d,c.start),g},i.DragEvent=p,t.exports=p},{"./fly.core":5}],9:[function(require,module,exports){"use strict";var fly=require("./fly.core"),objectToString={}.toString,numberRegExp=/^\d*$/,escapeableRegExp=/["\\\x00-\x1f\x7f-\x9f]/g,_meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},format={},formatDate=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n){var r,s=new RegExp("("+i+")"),a=n[i]+"";s.test(t)&&(r=1==RegExp.$1.length?a:("00"+a).substr(a.length),t=t.replace(RegExp.$1,r))}return t};format.parseDate=function(e,t){var n,i,r,s="yyyy/MM/dd HH:mm:ss",a=new Date,o=0,l=["yyyyMMddHHmmss","yyyyMMddHHmm","yyyyMMdd","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HHmmss","HH:mm:ss"],u={"y+":a.getFullYear(),"M+":a.getMonth()+1,"d+":a.getDate(),"H+":0,"m+":0,"s+":0};if("[object Date]"===objectToString.call(e))n=e;else for(i=l.length;i>o;o++){var c=s,d=l[o];if(d.length==e.length){for(r in u){var f=new RegExp("("+r+")"),h=d.search(f),p="";if(h>=0){if(p=e.substr(h,RegExp.$1.length),!numberRegExp.test(p))break}else p=u[r]+"";p=1==p.length?"0"+p:p,c=c.replace(f,p)}try{if(n=new Date(c),"Invalid Date"==n.toString())continue;break}catch(g){continue}}}return t?formatDate(n,t):n},format.toJSON=function(e){if("object"==typeof JSON&&JSON.stringify){var t=JSON.stringify(e);return t}var n=typeof e;if(null===e)return"null";if("undefined"==n)return void 0;if("number"==n||"boolean"==n)return e+"";if("string"==n)return fly.quoteString(e);if("object"==n){if("function"==typeof e.toJSON)return fly.toJSON(e.toJSON());if(e.constructor===Date)return formatDate(e,"yyyy-MM-ddTHH:mm:ss.SZ");if(e.constructor===Array){for(var i=[],r=0;r<e.length;r++)i.push(fly.toJSON(e[r])||"");return"["+i.join(",")+"]"}var s=[];for(var a in e){var o,n=typeof a;if("number"==n)o='"'+a+'"';else{if("string"!=n)continue;o=fly.quoteString(a)}if("function"!=typeof e[a]){var l=fly.toJSON(e[a]);s.push(o+":"+l)}}return"{"+s.join(", ")+"}"}},format.evalJSON=function(src){return src?"object"==typeof JSON&&JSON.parse?JSON.parse(src):eval("("+src+")"):{}},format.secureEvalJSON=function(src){if("object"==typeof JSON&&JSON.parse)return JSON.parse(src);var filtered=src;if(filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@"),filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},format.quoteString=function(e){return e.match(escapeableRegExp)?'"'+e.replace(escapeableRegExp,function(e){var t=_meta[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'},format.format=function(e,t){return 1==arguments.length?function(){var t=$.makeArray(arguments);return t.unshift(e),format.format.apply(this,t)}:(arguments.length>2&&t.constructor!=Array&&(t=$.makeArray(arguments).slice(1)),t.constructor!=Array&&(t=[t]),$.each(t,function(t,n){e=e.replace(new RegExp("\\{"+t+"\\}","g"),n)}),e)},$.extend(fly,format),module.exports=format},{"./fly.core":5}],10:[function(e,t,n){"use strict";function i(e,t){var n,i,r,s=t.length,a=[];for(i=0;i<e.length;i++)for(n=e[i],r=0;s>r;r++)n===t[r]&&a.push({index:i,item:n});return a}function r(e,t){var n,i=!1;return e.filters&&(n=u.grep(e.filters,function(e){return i=r(e,t),e.filters?e.filters.length:e.field!=t}),i||e.filters.length===n.length||(i=!0),e.filters=n),i}var s=e("./fly.core"),a=e("./fly.ui"),o=e("./fly.popup"),l=e("./fly.data"),u=s.$,c=s.keys,d=u.proxy,f=u.extend,h=u.isArray,p=s.ObservableArray,g="id",v="change",_="state-focused",m="state-hover",y="glyphicon-refresh",b="open",w="close",x="select",S="selected",T="requestStart",C="requestEnd",I="width",k=u.browser.msie&&u.browser.version<9,O=/"/g,D={ComboBox:"DropDownList",DropDownList:"ComboBox"},$=s.activeElement,E=a.DataBoundWidget.extend({ctor:function(e,t){var n,i=this,r=i.ns;i._super(e,t),e=i.element,t=i.options,i._isSelect=e.is(x),i._isSelect&&i.element[0].length&&(t.dataSource||(t.dataTextField=t.dataTextField||"text",t.dataValueField=t.dataValueField||"value")),i.ul=u('<ul unselectable="on" class="list reset"/>').attr({tabIndex:-1}),i.list=u("<div class='list-container'/>").append(i.ul).on("mousedown"+r,d(i._listMousedown,i)),n=e.attr(g),n&&(i.list.attr(g,n+"-list"),i.ul.attr(g,n+"_listbox")),i._accessors(),i._initValue()},options:{valuePrimitive:!1},setOptions:function(e){this._super.setOptions(e),e&&void 0!==e.enable&&(e.enabled=e.enable)},focus:function(){this._focused.focus()},readonly:function(e){this._editable({readonly:void 0===e?!0:e,disable:!1})},enable:function(e){this._editable({readonly:!1,disable:!(e=void 0===e?!0:e)})},_listOptions:function(e){var t=this.options;return e=e||{},e={height:e.height||t.height,dataValueField:e.dataValueField||t.dataValueField,dataTextField:e.dataTextField||t.dataTextField,template:e.template||t.template},e.template||(e.template="{{"+s.expr(e.dataTextField,"$data")+"}}"),e},_initList:function(){var e=this,t=e.options,n=t.virtual,i=!!n,r=t.value,s=d(e._listBound,e),o={autoBind:!1,selectable:!0,shadowItem:t.tips||!1,dataSource:e.dataSource,click:d(e._click,e),change:d(e._listChange,e),activate:d(e._activateItem,e),deactivate:d(e._deactivateItem,e),dataBinding:function(){e.trigger("dataBinding")},dataBound:s,listBound:s,selectedItemChange:d(e._listChange,e)};o=f(e._listOptions(),o,"object"==typeof n?n:{}),i?e.listView=new a.VirtualList(e.ul,o):e.listView=new a.StaticList(e.ul,o),void 0!==r&&e.listView.value(r).done(function(){var n=t.text;e.input&&-1===e.selectedIndex&&((void 0===n||null===n)&&(n=r),e._accessor(r),e.input.val(n))})},_listMousedown:function(e){this.filterInput&&this.filterInput[0]===e.target||e.preventDefault()},_filterSource:function(e,t){var n=this,i=n.options,s=n.dataSource,a=f({},s.filter()||{}),o=r(a,i.dataTextField);(e||o)&&n.trigger("filtering",{filter:e})||(e&&(a=a.filters||[],a.push(e)),t?s.read(a):s.filter(a))},_initValue:function(){var e=this,t=e.options.value;null!==t?e.element.val(t):(t=e._accessor(),e.options.value=t),e._old=t},_ignoreCase:function(){var e,t=this,n=t.dataSource.reader.model;n&&n.fields&&(e=n.fields[t.options.dataTextField],e&&e.type&&"string"!==e.type&&(t.options.ignoreCase=!1))},_focus:function(e){return this.listView.focus(e)},current:function(e){return this._focus(e)},items:function(){return this.ul[0].children},destroy:function(){var e=this,t=e.ns;e._super.destroy(),e._unbindDataSource(),e.listView.destroy(),e.list.off(t),e.popup.destroy(),e._form&&e._form.off("reset",e._resetHandler)},dataItem:function(e){var t=this;return void 0===e?t.listView.selectedDataItems()[0]:("number"!=typeof e&&(e=u(t.items()).index(e)),t.dataSource.view()[e])},_activateItem:function(){this.listView.focus()},_deactivateItem:function(){},_accessors:function(){var e=this,t=e.element,n=e.options,i=s.getter,r=t.attr("data-text-field"),a=t.attr("data-value-field");!n.dataTextField&&r&&(n.dataTextField=r),!n.dataValueField&&a&&(n.dataValueField=a),e._text=i(n.dataTextField),e._value=i(n.dataValueField)},_blur:function(){var e=this;e._change(),e.close()},_change:function(){var e,t=this,n=t.selectedIndex,i=t.options.value,r=t.value();t._isSelect&&!t.listView.isBound()&&i&&(r=i),r!==t._old?e=!0:void 0!==n&&n!==t._oldIndex&&(e=!0),e&&(t._old=r,t._oldIndex=n,t.element.trigger(v),t.trigger(v))},_data:function(){this.dataSource.view()},_enable:function(){var e=this,t=e.options,n=e.element.is("[disabled]");void 0!==t.enable&&(t.enabled=t.enable),!t.enabled||n?e.enable(!1):e.readonly(e.element.is("[readonly]"))},_dataValue:function(e){var t=this._value(e);return void 0===t&&(t=this._text(e)),t},_offsetHeight:function(){var e=0,t=this.listView.content.prevAll(":visible");return t.each(function(){var t=u(this);e+=t.hasClass("list-filter")?t.children().outerHeight():t.outerHeight()}),e},_height:function(e){var t,n,i=this,r=i.list,s=i.options.height,a=i.popup.visible();return e&&(n=r.add(r.parent(".animation-container")).show(),s=i.listView.content[0].scrollHeight>s?s:"auto",n.height(s),"auto"!==s&&(t=i._offsetHeight(),t&&(s-=t)),i.listView.content.height(s),a||n.hide()),s},_adjustListWidth:function(){var e,t,n=this.list,i=n[0].style.width,r=this.wrapper;if(n.data(I)||!i)return e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):r.outerWidth(),e&&u.browser.msie&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),i="border-box"!==n.css("box-sizing")?t-(n.outerWidth()-n.width()):t,n.css({fontFamily:r.css("font-family"),width:i}).data(I,i),!0},_openHandler:function(e){this._adjustListWidth(),this.trigger(b)&&e.preventDefault()},_closeHandler:function(e){this.trigger(w)&&e.preventDefault()},_focusItem:function(){var e=this.listView,t=e.focus(),n=e.select();n=n[n.length-1],void 0===n&&this.options.highlightFirst&&!t&&(n=0),void 0!==n?e.focus(n):e.scrollToIndex(0)},_firstOpen:function(){this._height(this.dataSource.view().length)},_popup:function(){var e=this;e.popup=new o(e.list,f({},e.options.popup,{anchor:e.wrapper,open:d(e._openHandler,e),close:d(e._closeHandler,e),animation:e.options.animation})),e.options.virtual||e.popup.one(b,d(e._firstOpen,e))},_makeUnselectable:function(){k&&this.list.find("*").not(".textbox").attr("unselectable","on")},_toggleHover:function(e){u(e.currentTarget).toggleClass(m,"mouseenter"===e.type)},_toggle:function(e,t){var n=this;e=void 0!==e?e:!n.popup.visible(),t||n._focused[0]===$()||n._focused.focus(),n[e?b:w]()},_triggerCascade:function(){var e=this;e._cascadeTriggered&&e._old===e.value()&&e._oldIndex===e.selectedIndex||(e._cascadeTriggered=!0,e.trigger("cascade",{userTriggered:e._userTriggered}))},_unbindDataSource:function(){var e=this;e.dataSource.unbind(T,e._requestStartHandler).unbind(C,e._requestEndHandler).unbind("error",e._errorHandler)}});f(E,{inArray:function(e,t){var n,i,r=t.children;if(!e||e.parentNode!==t)return-1;for(n=0,i=r.length;i>n;n++)if(e===r[n])return n;return-1}}),a.List=E,a.Select=E.extend({ctor:function(e,t){this._super(e,t),this._initial=this.element.val()},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.listView.setDataSource(this.dataSource),this.options.autoBind&&this.dataSource.fetch()},close:function(){this.popup.close()},select:function(e){var t=this;return void 0===e?t.selectedIndex:(t._select(e),t._old=t._accessor(),t._oldIndex=t.selectedIndex,void 0)},search:function(e){e="string"==typeof e?e:this.text();var t=this,n=e.length,i=t.options,r=i.ignoreCase,s=i.filter,a=i.dataTextField;clearTimeout(t._typing),(!n||n>=i.minLength)&&(t._state="filter",t.listView.filter(!0),"none"===s?t._filter(e):(t._open=!0,t._filterSource({value:r?e.toLowerCase():e,field:a,operator:s,ignoreCase:r})))},_accessor:function(e,t){return this[this._isSelect?"_accessorSelect":"_accessorInput"](e,t)},_accessorInput:function(e){var t=this.element[0];return void 0===e?t.value:void(t.value=e)},_accessorSelect:function(e,t){var n,i=this.element[0],r=i.selectedIndex;return void 0===e?(r>-1&&(n=i.options[r]),n&&(e=n.value),e||""):(r>-1&&i.options[r].removeAttribute(S),void 0===t&&(t=-1),""!==e&&-1==t?this._custom(e):(e?i.value=e:i.selectedIndex=t,i.selectedIndex>-1&&(n=i.options[i.selectedIndex]),n&&n.setAttribute(S,S)),void 0)},_custom:function(e){var t=this,n=t.element,i=t._customOption;i||(i=u("<option/>"),t._customOption=i,n.append(i)),i.text(e),i[0].setAttribute(S,S)},_hideBusy:function(){var e=this;clearTimeout(e._busy),e._arrow.removeClass(y),e._busy=null},_showBusy:function(){var e=this;e._request=!0,e._busy||(e._busy=setTimeout(function(){e._arrow&&e._arrow.addClass(y)},100))},_requestEnd:function(){this._request=!1,this._hideBusy()},_dataSource:function(){var e,t=this,n=t.element,i=t.options,r=i.dataSource||{};r=h(r)?{data:r}:r,t._isSelect&&(e=n[0].selectedIndex,e>-1&&(i.index=e),r.select=n,r.fields=[{field:i.dataTextField},{field:i.dataValueField}]),t.dataSource?t._unbindDataSource():(t._requestStartHandler=d(t._showBusy,t),t._requestEndHandler=d(t._requestEnd,t),t._errorHandler=d(t._hideBusy,t)),t.dataSource=l.DataSource.create(r).bind(T,t._requestStartHandler).bind(C,t._requestEndHandler).bind("error",t._errorHandler)},_firstItem:function(){this.listView.first()},_lastItem:function(){this.listView.last()},_nextItem:function(){this.listView.next()},_prevItem:function(){this.listView.prev()},_move:function(e){var t,n,i,r=this,s=e.keyCode,a=(r.ul[0],s===c.DOWN);if(s===c.UP||a){if(e.altKey)r.toggle(a);else{if(!r.listView.isBound())return r._fetch||(r.dataSource.one(v,function(){r._fetch=!1,r._move(e)}),r._fetch=!0,r._filterSource()),e.preventDefault(),!0;if(i=r._focus(),r._fetch||i&&!i.hasClass("state-selected")||(a?(r._nextItem(),r._focus()||r._lastItem()):(r._prevItem(),r._focus()||r._firstItem())),r.trigger(x,{item:r.listView.focus()}))return void r._focus(i);r._select(r._focus(),!0),r.popup.visible()||r._blur()}e.preventDefault(),n=!0}else if(s===c.ENTER||s===c.TAB){r.popup.visible()&&e.preventDefault(),i=r._focus(),t=r.dataItem(),r.popup.visible()||t&&r.text()===r._text(t)||(i=null);var o=r.filterInput&&r.filterInput[0]===$();if(i){if(r.trigger(x,{item:i}))return;r._select(i)}else r.input&&(r._accessor(r.input.val()),r.listView.value(r.input.val()));r._focusElement&&r._focusElement(r.wrapper),o&&s===c.TAB?r.wrapper.focusout():r._blur(),r.close(),n=!0}else s===c.ESC&&(r.popup.visible()&&e.preventDefault(),r.close(),n=!0);return n},_fetchData:function(){var e=this,t=!!e.dataSource.view().length;e.element[0].disabled||e._request||e.options.cascadeFrom||e.listView.isBound()||e._fetch||t||(e._fetch=!0,e.dataSource.fetch().done(function(){e._fetch=!1}))},_options:function(e,t,n){var i,r,s,a,o=this,l=o.element,u=e.length,c="",d=0;for(t&&(c=t);u>d;d++)i="<option",r=e[d],s=o._text(r),a=o._value(r),void 0!==a&&(a+="",-1!==a.indexOf('"')&&(a=a.replace(O,"&quot;")),i+=' value="'+a+'"'),i+=">",void 0!==s&&(i+=s),i+="</option>",c+=i;l.html(c),void 0!==n&&l.val(n)},_reset:function(){var e=this,t=e.element,n=t.attr("form"),i=n?u("#"+n):t.closest("form");i[0]&&(e._resetHandler=function(){setTimeout(function(){e.value(e._initial)})},e._form=i.on("reset",e._resetHandler))},_cascade:function(){var e,t,n,i,a,o=this,l=o.options,c=l.cascadeFrom;if(c){if(t=u("#"+c),e=t.data(s.NS+l.name),e||(e=t.data(s.NS+D[l.name])),!e)return;l.autoBind=!1,i=l.cascadeFromField||e.options.dataValueField,a=function(){o.dataSource.unbind(v,a);var t=o._accessor();o._userTriggered?o._clearSelection(e,!0):t?(t!==o.listView.value()[0]&&o.value(t),o.dataSource.view()[0]&&-1!==o.selectedIndex||o._clearSelection(e,!0)):o.dataSource.view().length&&o.select(l.index),o.enable(),o._triggerCascade(),o._userTriggered=!1},n=function(){var t,n,s=e.dataItem(),l=s?e._value(s):null;if(l||0===l){t=o.dataSource.filter()||{},r(t,i),n=t.filters||[],n.push({field:i,operator:"eq",value:l});var u=function(){o.unbind("dataBound",u),a.apply(o,arguments)};o.first("dataBound",u),o.dataSource.filter(n)}else o.enable(!1),o._clearSelection(e),o._triggerCascade(),o._userTriggered=!1},e.first("cascade",function(e){o._userTriggered=e.userTriggered,n()}),e.listView.isBound()?n():e.value()||o.enable(!1)}}});var F=".StaticList",P=a.DataBoundWidget.extend({name:"StaticList",ctor:function(e,t){this._super(e,t),this.element.attr("role","listbox").on("click"+F,"li",d(this._click,this)).on("mouseenter"+F,"li",function(){u(this).addClass(m)}).on("mouseleave"+F,"li",function(){u(this).removeClass(m)}),this.content=this.element.wrap("<div unselectable='on'></div>").parent().css({overflow:"auto",position:"relative"}),this._bound=!1,this._optionID=s.guid(),this._selectedIndices=[],this._view=[],this._dataItems=[],this._values=[];var n=this.options.value;n&&(this._values=h(n)?n.slice(0):[n]),this._getter(),this._templates(),this.setDataSource(this.options.dataSource),this._onScroll=d(function(){var e=this;clearTimeout(e._scrollId)},this)},options:{name:"StaticList",dataValueField:null,selectable:!0,template:null},events:["click","change","activate","deactivate","dataBinding","dataBound","selectedItemChange"],setDataSource:function(e){var t,n=this,i=e||{};i=h(i)?{data:i}:i,i=l.DataSource.create(i),n.dataSource?(n.dataSource.unbind(v,n._refreshHandler),t=n.value(),n.value([]),n._bound=!1,n.value(t)):n._refreshHandler=d(n.refresh,n),n.dataSource=i.bind(v,n._refreshHandler)},setOptions:function(e){this._super.setOptions(e),this._getter(),this._templates(),this._render()},destroy:function(){this.element.off(F),this._refreshHandler&&this.dataSource.unbind(v,this._refreshHandler),this._super.destroy()},scrollToIndex:function(e){var t=this.element[0].children[e];t&&this.scroll(t)},scroll:function(e){if(e){e[0]&&(e=e[0]);var t=this.content[0],n=e.offsetTop,i=e.offsetHeight,r=t.scrollTop,s=t.clientHeight,a=n+i;r>n?r=n:a>r+s&&(r=a-s),t.scrollTop=r}},selectedDataItems:function(e){var t=this._valueGetter;
return void 0===e?this._dataItems.slice():(this._dataItems=e,void(this._values=u.map(e,function(e){return t(e)})))},next:function(){var e=this.focus();e=e?e.next():0,this.focus(e)},prev:function(){var e=this.focus();e=e?e.prev():this.element[0].children.length-1,this.focus(e)},first:function(){this.focus(this.element[0].children[0])},last:function(){this.focus(this.element[0].children[this.element[0].children.length-1])},focus:function(e){var t,n=this,i=n._optionID;return void 0===e?n._current:(e=n._get(e),e=e[e.length-1],e=u(this.element[0].children[e]),n._current&&(n._current.removeClass(_).removeAttr(g),n.trigger("deactivate")),t=!!e[0],t&&(e.addClass(_),n.scroll(e),e.attr("id",i)),n._current=t?e:null,void n.trigger("activate"))},filter:function(e,t){return void 0===e?this._filtered:void(this._filtered=e)},skipUpdate:function(e){this._skipUpdate=e},select:function(e){var t,n=this,i=n.options.selectable,r="multiple"!==i&&i!==!1,s=n._selectedIndices,a=[],o=[];if(void 0===e)return s.slice();if(e=n._get(e),1===e.length&&-1===e[0]&&(e=[]),!n._filtered||r||!n._deselectFiltered(e)){if(r&&!n._filtered&&-1!==u.inArray(e[e.length-1],s))return void(n._dataItems.length&&n._view.length&&(n._dataItems=[n._view[s[0]].item]));t=n._deselect(e),o=t.removed,e=t.indices,e.length&&(r&&(e=[e[e.length-1]]),a=n._select(e)),(a.length||o.length)&&n.trigger("change",{added:a,removed:o})}},removeAt:function(e){return this._selectedIndices.splice(e,1),this._values.splice(e,1),{position:e,dataItem:this._dataItems.splice(e,1)[0]}},setValue:function(e){(""===e||null===e)&&(e=[]),e=h(e)||e instanceof p?e.slice(0):[e],this._values=e},value:function(e){var t,n=this,i=n._valueDeferred;return void 0===e?n._values.slice():(n.setValue(e),i&&"resolved"!==i.state()||(n._valueDeferred=i=u.Deferred()),n.isBound()&&(t=n._valueIndices(n._values),"multiple"===n.options.selectable&&n.select(-1),n.select(t),i.resolve()),n._skipUpdate=!1,i)},_click:function(e){e.isDefaultPrevented()||this.trigger("click",{item:u(e.currentTarget)})},_dataItemPosition:function(e,t){for(var n=this._valueGetter(e),i=-1,r=0;r<t.length;r++)if(n==t[r]){i=r;break}return i},_updateIndices:function(e,t){var n,i=this._view,r=0;if(!t.length)return[];for(;r<i.length;r++)n=this._dataItemPosition(i[r].item,t),-1!==n&&(e[n]=r);return this._normalizeIndices(e)},_valueIndices:function(e){var t=[];return this._updateIndices(t,e)},_getter:function(){this._valueGetter=s.getter(this.options.dataValueField)},_deselect:function(e){var t,n,i,r=this,s=r.element[0].children,a=r.options.selectable,o=r._selectedIndices,l=r._dataItems,c=r._values,d=[],f=0,h=0;if(e=e.slice(),a!==!0&&e.length){if("multiple"===a)for(;f<e.length;f++)if(n=e[f],u(s[n]).hasClass("state-selected"))for(t=0;t<o.length;t++)if(i=o[t],i===n){u(s[i]).removeClass("state-selected"),d.push({position:t+h,dataItem:l.splice(t,1)[0]}),o.splice(t,1),e.splice(f,1),c.splice(t,1),h+=1,f-=1,t-=1;break}}else{for(;f<o.length;f++)u(s[o[f]]).removeClass("state-selected"),d.push({position:f,dataItem:l[f]});r._values=[],r._dataItems=[],r._selectedIndices=[]}return{indices:e,removed:d}},_deselectFiltered:function(e){for(var t,n,i,r=this.element[0].children,s=[],a=0;a<e.length;a++)n=e[a],t=this._view[n].item,i=this._dataItemPosition(t,this._values),i>-1&&(s.push(this.removeAt(i)),u(r[n]).removeClass("state-selected"));return s.length?(this.trigger("change",{added:[],removed:s}),!0):!1},_select:function(e){var t,n,i=this,r=i.element[0].children,s=i._view,a=[],o=0;for(-1!==e[e.length-1]&&i.focus(e);o<e.length;o++)n=e[o],t=s[n],-1!==n&&t&&(t=t.item,i._selectedIndices.push(n),i._dataItems.push(t),i._values.push(i._valueGetter(t)),u(r[n]).addClass("state-selected"),a.push({dataItem:t}));return a},_get:function(e){return"number"==typeof e?e=[e]:h(e)||(e=u(e).data("offset-index"),void 0===e&&(e=-1),e=[e]),e},_template:function(){var e=this,t=e.options,n=t.template;return n?(n=s.template.compile(n),n=function(e){return'<li tabindex="-1" role="option" unselectable="on" class="item">'+n(e)+"</li>"}):n=s.template.compile('<li tabindex="-1" role="option" unselectable="on" class="item">{{'+s.expr(t.dataTextField,"$data")+"}}</li>"),n},_templates:function(){var e,t={template:this.options.template};for(var n in t)e=t[n],e&&"function"!=typeof e&&(t[n]=s.template.compile(e));this.templates=t},_normalizeIndices:function(e){for(var t=[],n=0;n<e.length;n++)void 0!==e[n]&&t.push(e[n]);return t},_firstVisibleItem:function(){for(var e=this.element[0],t=this.content[0],n=t.scrollTop,i=u(e.children[0]).height(),r=Math.floor(n/i)||0,s=e.children[r]||e.lastChild,a=s.offsetTop<n;s;)if(a){if(s.offsetTop+i>n||!s.nextSibling)break;s=s.nextSibling}else{if(s.offsetTop<=n||!s.previousSibling)break;s=s.previousSibling}return this._view[u(s).data("offset-index")]},_renderItem:function(e){var t='<li tabindex="-1" role="option" unselectable="on" class="item',n=e.item,i=(0!==e.index,e.selected);return i&&(t+=" state-selected"),t+='" data-offset-index="'+e.index+'">',t+=this.templates.template(n),t+"</li>"},_render:function(){var e,t="",n=0,i=[],r=this.options,s=this.dataSource.view(),a=this.value(),o=r.shadowItem,l={};for(o&&(l[r.dataTextField]=o||"请选择",l[r.dataValueField]="",s.unshift(l)),n=0;n<s.length;n++)e={selected:this._selected(s[n],a),item:s[n],index:n},i[n]=e,t+=this._renderItem(e);this._view=i,this.element[0].innerHTML=t},_selected:function(e,t){var n=!this._filtered||"multiple"===this.options.selectable;return n&&-1!==this._dataItemPosition(e,t)},refresh:function(e){var t,n=this,r=e&&e.action;n.trigger("dataBinding"),n._render(),n._bound=!0,"itemchange"===r?(t=i(n._dataItems,e.items),t.length&&n.trigger("selectedItemChange",{items:t})):n._filtered||n._skipUpdate?(n.focus(0),n._skipUpdate&&(n._skipUpdate=!1,n._updateIndices(n._selectedIndices,n._values))):r&&"add"!==r||n.value(n._values),n._valueDeferred&&n._valueDeferred.resolve(),n.trigger("dataBound")},isBound:function(){return this._bound}});a.register(P),t.exports=E},{"./fly.core":5,"./fly.data":7,"./fly.popup":13,"./fly.ui":16}],11:[function(e,t,n){"use strict";function i(e,t){var n,i;for(i in e){if(n=e[i],c(n)&&n.field&&n.field===t)return n;if(n===t)return n}return null}var r=e("./fly.core"),s=(e("./fly.observable"),e("./fly.format")),a=r.ObservableObject,o=r.$,l=o.extend,u=o.isEmptyObject,c=o.isPlainObject,d="string",f="[object Array]",h={number:function(e){return parseFloat(e)},date:function(e){return s.parseDate(e)},"boolean":function(e){return typeof e===d?"true"===e.toLowerCase():null!=e?!!e:e},string:function(e){return null!=e?e+"":e},"default":function(e){return e}},p={string:"",number:0,date:new Date,"boolean":!1,"default":""},g=a.extend({ctor:function(e){var t=this,n=t._initializers;if((!e||u(e))&&(e=l({},t.defaults,e),n))for(var i=0;i<n.length;i++){var r=n[i];e[r]=t.defaults[r]()}t._super(e),t.dirty=!1,t.idField&&(t.id=t.get(t.idField),void 0===t.id&&(t.id=t._defaultId))},shouldSerialize:function(e){return this._super.shouldSerialize(e)&&"uid"!==e&&!("id"!==this.idField&&"id"===e)&&"dirty"!==e&&"_accessors"!==e},_parse:function(e,t){var n,r=this,s=e,a=r.fields||{};return e=a[e],e||(e=i(a,s)),e&&(n=e.parse,!n&&e.type&&(n=h[e.type.toLowerCase()])),n?n(t):t},_notifyChange:function(e){var t=e.action;("add"==t||"remove"==t)&&(this.dirty=!0)},editable:function(e){return e=(this.fields||{})[e],e?e.editable!==!1:!0},set:function(e,t,n){var i=this;i.editable(e)&&(t=i._parse(e,t),equal(t,i.get(e))||(i.dirty=!0,i._super.set(e,t,n)))},accept:function(e){var t,n=this,i=function(){return n};for(t in e){var r=e[t];"_"!=t.charAt(0)&&(r=n.wrap(e[t],t,i)),n._set(t,r)}n.idField&&(n.id=n.get(n.idField)),n.dirty=!1},isNew:function(){return this.id===this._defaultId}});g.define=function(e,t){void 0===t&&(t=e,e=g);var n,i,r,s,a,o,u,c,v=l({defaults:{}},t),_={},m=v.id,y=[];if(m&&(v.idField=m),v.id&&delete v.id,m&&(v.defaults[m]=v._defaultId=""),toString.call(v.fields)===f){for(o=0,u=v.fields.length;u>o;o++)r=v.fields[o],typeof r===d?_[r]={}:r.field&&(_[r.field]=r);v.fields=_}for(i in v.fields)r=v.fields[i],s=r.type||"default",a=null,c=i,i=typeof r.field===d?r.field:i,r.nullable||(a=v.defaults[c!==i?c:i]=void 0!==r.defaultValue?r.defaultValue:p[s.toLowerCase()],"function"==typeof a&&y.push(i)),t.id===i&&(v._defaultId=a),v.defaults[c!==i?c:i]=a,r.parse=r.parse||h[s];return y.length>0&&(v._initializers=y),n=e.extend(v),n.define=function(e){return g.define(n,e)},v.fields&&(n.fields=v.fields,n.idField=v.idField),n},r.Model=g,t.exports=g},{"./fly.core":5,"./fly.format":9,"./fly.observable":12}],12:[function(e,t,n){"use strict";function i(e,t){var n,i,r,s,a=t||"d",o=1;for(i=0,r=e.length;r>i;i++)s=e[i],""!==s&&(n=s.indexOf("["),0!==n&&(-1==n?s="."+s:(o++,s="."+s.substring(0,n)+" || {})"+s.substring(n))),o++,a+=s+(r-1>i?" || {})":")"));return new Array(o).join("(")+a}function r(e,t,n,i){return function(r){var s,a={};for(s in r)a[s]=r[s];i?a.field=n+"."+r.field:a.field=n,t==v&&e._notifyChange&&e._notifyChange(a),e.trigger(t,a)}}var s=e("./fly.core"),a=e("./fly.class"),o=s.$,l=o.proxy,u=o.noop,c={},d={},f=[].slice,h={}.toString,p="function",g="string",v="change",_="get",m="[object Object]",y="[object Array]";s.expr=function(e,t,n){return e=e||"",typeof t==g&&(n=t,t=!1),n=n||"d",e&&"["!==e.charAt(0)&&(e="."+e),t?(e=e.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"'),e=e.replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'"),e=i(e.split("."),n),e=e.replace(/_\$DOT\$_/g,".")):e=n+e,e},s.getter=function(e,t){var n=e+t;return c[n]=c[n]||new Function("d","return "+s.expr(e,t))},s.setter=function(e){return d[e]=d[e]||new Function("d, value",s.expr(e)+"=value")},s.preventDefault=function(e){e.preventDefault()};var b=a.extend({ctor:function(){this._events={}},bind:function(e,t,n){var i,r,s,a,o=this,l=0,u=typeof t===p,c=typeof e===g?[e]:e,d=c.length;if(void 0===t){for(i in e)o.bind(i,e[i]);return o}for(;d>l;l++)e=c[l],a=u?t:t[e],a&&(n&&(s=a,a=function(){o.unbind(e,a),s.apply(o,arguments)},a.original=s),r=o._events[e]=o._events[e]||[],r.push(a));return o},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){for(var n,i,r=this,s=0,a=typeof t===p,o=typeof e===g?[e]:e,l=o.length;l>s;s++)e=o[s],i=a?t:t[e],i&&(n=r._events[e]=r._events[e]||[],n.unshift(i));return r},trigger:function(e,t){var n,i,r=this,s=r._events[e];if(s){for(t=t||{},t.sender=r,t._defaultPrevented=!1,t.preventDefault=function(){this._defaultPrevented=!0},t.isDefaultPrevented=function(){return this._defaultPrevented===!0},s=s.slice(),n=0,i=s.length;i>n;n++)s[n].call(r,t);return t._defaultPrevented===!0}return!1},unbind:function(e,t){var n,i=this,r=i._events[e];if(void 0===e)i._events={};else if(r)if(t)for(n=r.length-1;n>=0;n--)(r[n]===t||r[n].original===t)&&r.splice(n,1);else i._events[e]=[];return i}}),w=b.extend({ctor:function(e){var t,n,i=this,r=function(){return i};if(void 0!==e){i._super();for(n in e)t=e[n],"object"==typeof t&&t&&!t.getTime&&"_"!=n.charAt(0)&&(t=i.wrap(t,n,r)),i[n]=t;i.uid=s.guid()}},shouldSerialize:function(e){return this.hasOwnProperty(e)&&"_events"!==e&&"_super"!==e&&typeof this[e]!==p&&"uid"!==e},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(){var e,t,n={};for(t in this)this.shouldSerialize(t)&&(e=this[t],(e instanceof w||e instanceof x)&&(e=e.toJSON()),n[t]=e);return n},get:function(e){var t,n=this;return n.trigger(_,{field:e}),t="this"===e?n:s.getter(e,!0)(n)},_set:function(e,t){var n=this,i=e.indexOf(".")>=0;if(i)for(var r=e.split("."),a="";r.length>1;){a+=r.shift();var o=s.getter(a,!0)(n);if(o instanceof w)return o.set(r.join("."),t),i;a+="."}return s.setter(e)(n,t),i},set:function(e,t){var n=this,i=e.indexOf(".")>=0,r=s.getter(e,!0)(n);r!==t&&(n.trigger("set",{field:e,value:t})||(i||(t=n.wrap(t,e,function(){return n})),(!n._set(e,t)||e.indexOf("(")>=0||e.indexOf("[")>=0)&&n.trigger(v,{field:e})))},parent:u,wrap:function(e,t,n){var i=this,a=h.call(e);if(null!=e&&(a===m||a===y)){var o=e instanceof x,l=e instanceof s.data.DataSource;a!==m||l||o?(a===y||o||l)&&(o||l||(e=new x(e)),e.parent()!=n()&&e.bind(v,r(i,v,t,!1))):(e instanceof w||(e=new w(e)),e.parent()!=n()&&(e.bind(_,r(i,_,t,!0)),e.bind(v,r(i,v,t,!0)))),e.parent=n}return e}}),x=b.extend({ctor:function(e,t){var n=this;e&&(n.type=t||w,n._super(),n.length=e.length,n.wrapAll(e,n))},at:function(e){return this[e]},toJSON:function(){var e,t,n=this.length,i=new Array(n);for(e=0;n>e;e++)t=this[e],t instanceof w&&(t=t.toJSON()),i[e]=t;return i},parent:u,wrapAll:function(e,t){var n,i,r=this,s=function(){return r};for(t=t||[],n=0,i=e.length;i>n;n++)t[n]=r.wrap(e[n],s);return t},wrap:function(e,t){var n,i=this;return null!==e&&h.call(e)===m&&(n=e instanceof i.type||e instanceof s.Model,n||(e=e instanceof w?e.toJSON():e,e=new i.type(e)),e.parent=t,e.bind(v,function(e){i.trigger(v,{field:e.field,node:e.node,index:e.index,items:e.items||[this],action:e.node?e.action||"itemloaded":"itemchange"})})),e},push:function(){var e,t=this.length,n=this.wrapAll(arguments);return e=[].push.apply(this,n),this.trigger(v,{action:"add",index:t,items:n}),e},slice:f,sort:[].sort,join:[].join,pop:function(){var e=this.length,t=pop.apply(this);return e&&this.trigger(v,{action:"remove",index:e-1,items:[t]}),t},splice:function(e,t,n){var i,r,s,a=this.wrapAll(f.call(arguments,2));if(i=[].splice.apply(this,[e,t].concat(a)),i.length)for(this.trigger(v,{action:"remove",index:e,items:i}),r=0,s=i.length;s>r;r++)i[r]&&i[r].children&&i[r].unbind(v);return n&&this.trigger(v,{action:"add",index:e,items:a}),i},shift:function(){var e=this.length,t=[].shift.apply(this);return e&&this.trigger(v,{action:"remove",index:0,items:[t]}),t},unshift:function(){var e,t=this.wrapAll(arguments);return e=[].unshift.apply(this,t),this.trigger(v,{action:"add",index:0,items:t}),e},indexOf:function(e){var t,n,i=this;for(t=0,n=i.length;n>t;t++)if(i[t]===e)return t;return-1},forEach:function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)},map:function(e){for(var t=0,n=[],i=this.length;i>t;t++)n[t]=e(this[t],t,this);return n},filter:function(e){for(var t,n=0,i=[],r=this.length;r>n;n++)t=this[n],e(t,n,this)&&(i[i.length]=t);return i},find:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return t},every:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],!e(t,n,this))return!1;return!0},some:function(e){for(var t,n=0,i=this.length;i>n;n++)if(t=this[n],e(t,n,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);-1!==t&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}}),S=x.extend({ctor:function(e,t){this._super(),this.type=t||w;for(var n=0;n<e.length;n++)this[n]=e[n];this.length=n,this._parent=l(function(){return this},this)},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}});s.Observable=b,s.ObservableObject=w,s.ObservableArray=x,s.LazyObservableArray=S,s.observable=function(e){return e instanceof w||(e=new w(e)),e},t.exports=b},{"./fly.class":3,"./fly.core":5}],13:[function(e,t,n){"use strict";function i(e,t){var n;if(e.parent().hasClass("animation-container")){var i=e.parent(".animation-container"),r=i[0].style;i.is(":hidden")&&i.show(),n=H.test(r.width)||H.test(r.height),n||i.css({width:e.outerWidth(),height:e.outerHeight(),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})}else{var s=e[0].style.width,a=e[0].style.height,o=H.test(s),u=H.test(a);n=o||u,!o&&(!t||t&&s)&&(s=e.outerWidth()),!u&&(!t||t&&a)&&(a=e.outerHeight()),e.wrap(l("<div/>").addClass("animation-container").css({width:s,height:a})),n&&e.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})}return l.browser.msie&&Math.floor(l.browser.version)<=7&&e.css({zoom:1}),e.parent()}var r=e("./fly.core"),s=e("./fly.ui"),a=s.register,o=s.Widget,l=r.$,u=(r.keys,l.proxy),c=l.extend,d=r.$html,f=r.$win,h="Popup",p="."+r.NS+h,g="open",v="close",_="deactivate",m="activate",y="center",b="left",w="right",x="top",S="bottom",T="absolute",C="hidden",I="body",k="location",O="position",D="visible",$="effects",E="state-active",F="state-border",P=/state-border-(\w+)/,N=".picker-wrap, .dropdown-wrap, .link",B="down",z="scroll",A="resize scroll",M=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],q=/([^ ]+)/g,H=/%/,R=s.defaults[h]={toggleEvent:"click",origin:S+" "+b,position:x+" "+b,anchor:I,appendTo:null,collision:"flip fit",viewport:window,copyAnchorStyles:!0,autosize:!1,modal:!1,adjustSize:{width:0,height:0},animation:{open:{effects:"slideIn:down",transition:!0,duration:200},close:{duration:100,hide:!0}}},j={left:{reverse:w},right:{reverse:b},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:S},bottom:{reverse:x},"in":{reverse:"out"},out:{reverse:"in"}},L={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},V=function(e,t){return e===t||l.contains(e,t)},W=function(e){return L[e]||e},U=function(e,t){return e=e.replace(q,W),t&&(e=e.replace(q,"$1."+t)),e},J=o.extend({name:h,ctor:function(e,t){var n,i=this;t=t||{},i._super(e,t),e=i.element,t=i.options,i.collisions=t.collision?t.collision.split(" "):[],i.downEvent=U(B,r.guid()),1===i.collisions.length&&i.collisions.push(i.collisions[0]),n=l(i.options.anchor).closest(".popup").filter(":not([class^=km-])"),t.appendTo=l(l(t.appendTo)[0]||n[0]||I),i.element.hide().addClass("popup reset").css({position:T}).appendTo(t.appendTo).on("mouseenter"+p,function(){i._hovered=!0}).on("mouseleave"+p,function(){i._hovered=!1}),i.wrapper=l(),t.animation===!1&&(t.animation={open:{effects:{}},close:{hide:!0,effects:{}}}),c(t.animation.open,{complete:function(){i.wrapper.css({overflow:D}),i._activated=!0,i._trigger(m)}}),c(t.animation.close,{complete:function(){i._animationClose()}}),i._mousedownProxy=function(e){i._mousedown(e)},i._resizeProxy=function(e){i._resize(e)},t.toggleTarget&&l(t.toggleTarget).on(t.toggleEvent+p,u(i.toggle,i))},events:[g,m,v,_],options:R,_animationClose:function(){var e=this,t=e.options;e.wrapper.hide();var n,i,r=e.wrapper.data(k),s=l(t.anchor);r&&e.wrapper.css(r),t.anchor!=I&&(n=((s.attr("class")||"").match(P)||["","down"])[1],i=F+"-"+n,s.removeClass(i).children(N).removeClass(E).removeClass(i),e.element.removeClass(F+"-"+j[n].reverse)),e._closing=!1,e._trigger(_)},destroy:function(){var e,t=this,n=t.options,i=t.element.off(p);t._super.destroy(),n.toggleTarget&&l(n.toggleTarget).off(p),n.modal||(d.unbind(t.downEvent,t._mousedownProxy),t._scrollableParents().unbind(z,t._resizeProxy),f.unbind(A,t._resizeProxy)),r.destroy(t.element.children()),i.removeData(),n.appendTo[0]===document.body&&(e=i.parent(".animation-container"),e[0]?e.remove():i.remove())},open:function(e,t){var n,s,a=this,o={isFixed:!isNaN(parseInt(t,10)),x:e,y:t},u=a.element,h=a.options,p="down",v=l(h.anchor);if(!a.visible()){if(h.copyAnchorStyles&&u.css(r.getComputedStyles(v[0],M)),u.data("animating")||a._trigger(g))return;if(a._activated=!1,h.modal||(d.unbind(a.downEvent,a._mousedownProxy).bind(a.downEvent,a._mousedownProxy),a._scrollableParents().unbind(z,a._resizeProxy).bind(z,a._resizeProxy),f.unbind(A,a._resizeProxy).bind(A,a._resizeProxy)),a.wrapper=s=i(u,h.autosize).css({overflow:C,display:"block",position:T}),s.css(O),l(h.appendTo)[0]==document.body&&s.css(x,"-10000px"),n=c(!0,{},h.animation.open),a.flipped=a._position(o),p=n.effects.slideIn?n.effects.slideIn.direction:p,h.anchor!=I){var _=F+"-"+p;u.addClass(F+"-"+j[p].reverse),v.addClass(_).children(N).addClass(E).addClass(_)}u.data($,n.effects).flyStop(!0).flyAnimate(n)}},toggle:function(){var e=this;e[e.visible()?v:g]()},visible:function(){return this.element.is(":"+D)},close:function(e){var t,n,i,r,s=this,a=s.options;if(s.visible()){if(t=s.wrapper[0]?s.wrapper:t(s.element).hide(),s._closing||s._trigger(v))return;s.element.find(".popup").each(function(){var t=l(this),n=t.data("flyPopup");n&&n.close(e)}),d.unbind(s.downEvent,s._mousedownProxy),s._scrollableParents().unbind(z,s._resizeProxy),f.unbind(A,s._resizeProxy),e?n={hide:!0,effects:{}}:(n=c(!0,{},a.animation.close),i=s.element.data($),r=n.effects,!r&&!l.isEmptyObject(r)&&i&&l.isEmptyObject(i)&&(n.effects=i,n.reverse=!0),s._closing=!0),s.element.stop(),t.css({overflow:C}),s.element.flyAnimate(n)}},_trigger:function(e){return this.trigger(e,{type:e})},_resize:function(e){var t=this;"resize"===e.type?(clearTimeout(t._resizeTimeout),t._resizeTimeout=setTimeout(function(){t._position(),t._resizeTimeout=null},50)):(!t._hovered||t._activated&&t.element.hasClass("list-container"))&&t.close()},_mousedown:function(e){var t=this,n=t.element[0],i=t.options,r=l(i.anchor)[0],s=i.toggleTarget,a=e.target,o=l(a).closest(".popup");o=o[0],o&&o!==t.element[0]||"popover"!==l(e.target).closest("a").data("rel")&&(V(n,a)||V(r,a)||s&&V(l(s)[0],a)||t.close())},_fit:function(e,t,n){var i=0;return e+t>n&&(i=n-(e+t)),0>e&&(i=-e),i},_flip:function(e,t,n,i,r,s,a){var o=0;return a=a||t,s!==r&&s!==y&&r!==y&&(e+a>i&&(o+=-(n+t)),0>e+o&&(o+=n+t)),o},_scrollableParents:function(){return l(this.options.anchor).parentsUntil("body").filter(function(e,t){return r.isScrollable(t)})},_position:function(e){var t,n,i,s,a,o,u=this,d=u.element.css(O,""),f=u.wrapper,h=u.options,p=l(h.viewport),g=p.offset(),v=l(h.anchor),_=h.origin.toLowerCase().split(" "),m=h.position.toLowerCase().split(" "),y=u.collisions,b=10002,w=!(p[0]!=window||!window.innerWidth),x=0;if(a=w?window.innerWidth:p.width(),o=w?window.innerHeight:p.height(),w&&document.documentElement.offsetWidth-document.documentElement.clientWidth>0&&(a-=r.support.scrollbar()),t=v.parents().filter(f.siblings()),t[0])if(i=Math.max(Number(t.css("zIndex")),0))b=i+10;else for(n=v.parentsUntil(t),s=n.length;s>x;x++)i=Number(l(n[x]).css("zIndex")),i&&i>b&&(b=i+10);f.css("zIndex",b),e&&e.isFixed?f.css({left:e.x,top:e.y}):f.css(u._align(_,m));var S=f.position(),C=f.offset(),I=v.offsetParent().parent(".animation-container,.popup");I.length&&(S=f[O](),C=f.offset()),p[0]===window?(C.top-=window.pageYOffset||document.documentElement.scrollTop||0,C.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(C.top-=g.top,C.left-=g.left),u.wrapper.data(k)||f.data(k,c({},S));var D=c({},C),$=c({},S),E=h.adjustSize;"fit"===y[0]&&($.top+=u._fit(D.top,f.outerHeight()+E.height,o)),"fit"===y[1]&&($.left+=u._fit(D.left,f.outerWidth()+E.width,a));var F=c({},$);return"flip"===y[0]&&($.top+=u._flip(D.top,d.outerHeight(),v.outerHeight(),o,_[0],m[0],f.outerHeight())),"flip"===y[1]&&($.left+=u._flip(D.left,d.outerWidth(),v.outerWidth(),a,_[1],m[1],f.outerWidth())),d.css(O,T),f.css($),$.left!=F.left||$.top!=F.top},_align:function(e,t){var n,i=this,r=i.wrapper,s=l(i.options.anchor),a=e[0],o=e[1],u=t[0],c=t[1],d=s.offset(),f=l(i.options.appendTo),h=r.outerWidth(),p=r.outerHeight(),g=s.outerWidth(),v=s.outerHeight(),_=d.top,m=d.left,b=Math.round;return f[0]!=document.body&&(n=f.offset(),_-=n.top,m-=n.left),a===S&&(_+=v),a===y&&(_+=b(v/2)),u===S&&(_-=p),u===y&&(_-=b(p/2)),o===w&&(m+=g),o===y&&(m+=b(g/2)),c===w&&(m-=h),c===y&&(m-=b(h/2)),{top:_,left:m}}});a(J),t.exports=J},{"./fly.core":5,"./fly.ui":16}],14:[function(e,t,n){t.exports=null},{}],15:[function(e,t,n){"use strict";function i(e){return e.replace(u,"").replace(c,",").replace(d,"").replace(f,"").replace(h,"").split(p)}function r(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function s(e,t){function n(e){return f+=e.split(/\n/).length-1,c&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=g[1]+r(e)+g[2]+"\n"),e}function s(e){var n=f;if(u?e=u(e,t):a&&(e=e.replace(/\n/g,function(){return f++,"$line="+f+";"})),0===e.indexOf("=")){var r=d&&!/^=[=#]/.test(e);if(e=e.replace(/^=[=#]?|[\s;]*$/g,""),r){var s=e.replace(/\s*\([^\)]+\)/,"");T[s]||/^(include|print)$/.test(s)||(e="$escape("+e+")")}else e="$string("+e+")";e=g[1]+e+g[2]}return a&&(e="$line="+n+";"+e),O(i(e),function(e){if(e&&!h[e]){var t;t="print"===e?_:"include"===e?m:T[e]?"$utils."+e:C[e]?"$helpers."+e:"$data."+e,y+=e+"="+t+",",h[e]=!0}}),e+"\n"}var a=t.debug,o=t.openTag,l=t.closeTag,u=t.parser,c=t.compress,d=t.escape,f=1,h={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},p="".trim,g=p?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],v=p?"$out+=text;return $out;":"$out.push(text);",_="function(){var text=''.concat.apply('',arguments);"+v+"}",m="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+v+"}",y="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(a?"$line=0,":""),b=g[0],w="return new String("+g[3]+");";O(e.split(o),function(e){e=e.split(l);var t=e[0],i=e[1];1===e.length?b+=n(t):(b+=s(t),i&&(b+=n(i)))});var x=y+b+w;a&&(x="try{"+x+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+r(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var S=new Function("$data","$filename",x);return S.prototype=T,S}catch(I){throw I.temp="function anonymous($data,$filename) {"+x+"}",I}}var a=e("./fly.core"),o={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},l="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",u=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,c=/[^\w$]+/g,d=new RegExp(["\\b"+l.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),f=/^\d[^,]*|,\d[^,]*/g,h=/^,+|,+$/g,p=/^$|,+/,g=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?g(e.call(e)):""),e},v=function(e){return o[e]},_=function(e){return g(e).replace(/&(?![\w#]+;)|[<>"']/g,v)},m=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},y=function(e,t){var n,i;if(m(e))for(n=0,i=e.length;i>n;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},b=function(e,t){return-1!=e.indexOf("<")?k(e):"string"==typeof t?k(t,{filename:e}):S(e,t)};b.config=function(e,t){w[e]=t};var w=b.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},x=b.cache={};b.render=function(e,t){return k(e,t)};var S=b.renderFile=function(e,t){var n=b.get(e)||I({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n};b.get=function(e){var t;if(x[e])t=x[e];else if("object"==typeof document){var n=document.getElementById(e);if(n){var i=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,"");t=k(i,{filename:e})}}return t};var T=b.utils={$helpers:{},$include:S,$string:g,$escape:_,$each:y};b.helper=function(e,t){C[e]=t};var C=b.helpers=T.$helpers;b.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="<"+n+">\n"+e[n]+"\n\n";"object"==typeof console&&console.error(t)};var I=function(e){return b.onerror(e),function(){return"{Template Error}"}},k=b.compile=function(e,t){function n(n){try{return new a(n,r)+""}catch(i){return t.debug?I(i)():(t.debug=!0,k(e,t)(n))}}t=t||{};for(var i in w)void 0===t[i]&&(t[i]=w[i]);var r=t.filename;try{var a=s(e,t)}catch(o){return o.filename=r||"anonymous",o.name="Syntax Error",I(o)}return n.prototype=a.prototype,n.toString=function(){return a.toString()},r&&t.cache&&(x[r]=n),n},O=T.$each;w.openTag="{{",w.closeTag="}}";var D=function(e,t){var n=t.split(":"),i=n.shift(),r=n.join(":")||"";return r&&(r=", "+r),"$helpers."+i+"("+e+r+")"};w.parser=function(e,t){e=e.replace(/^\s/,"");var n=e.split(" "),i=n.shift(),r=n.join(" ");switch(i){case"if":e="if("+r+"){";break;case"else":n="if"===n.shift()?" if("+n.join(" ")+")":"",e="}else"+n+"{";break;case"/if":e="}";break;case"each":var s=n[0]||"$data",a=n[1]||"as",o=n[2]||"$value",l=n[3]||"$index",u=o+","+l;"as"!==a&&(s="[]"),e="$each("+s+",function("+u+"){";break;case"/each":e="});";break;case"echo":e="print("+r+");";break;case"print":case"include":e=i+"("+n.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(r)){var c=!0;0===e.indexOf("#")&&(e=e.substr(1),c=!1);for(var d=0,f=e.split("|"),h=f.length,p=f[d++];h>d;d++)p=D(p,f[d]);e=(c?"=":"=#")+p}else e=b.helpers[i]?"=#"+i+"("+n.join(",")+");":"="+e}return e},a.template=b,t.exports=b},{"./fly.core":5}],16:[function(e,t,n){"use strict";var i=e("./fly.core"),r=e("./fly.observable"),s=e("./fly.utils"),a=i.$,o=i.NS,l=[].slice,u="string",c="function",d="role",f="handler",h={roles:{},defaults:{}};h.Widget=r.extend({ctor:function(e,t,n){var i,r=this,s=r.name||"";t=t||{},r.element=a(e),r._super(),i=t.dataSource||null,i&&(t=a.extend({},t,{dataSource:{}})),t=r.options=a.extend(!0,{},r.options,t),i&&(t.dataSource=i),n!==!1&&(r.element.data(d,s.toLowerCase()),r.element.data(f,r),r.element.data(o+s,r)),r.bind(r.events,t)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].flyBindingTarget},_tabindex:function(e){e=e||this.wrapper;var t=this.element,n="tabindex",i=e.attr(n)||t.attr(n);t.removeAttr(n),e.attr(n,isNaN(i)?0:i)},setOptions:function(e){this._setEvents(e),a.extend(this.options,e)},_setEvents:function(e){for(var t,n=this,i=0,r=n.events.length;r>i;i++)t=n.events[i],n.options[t]&&e[t]&&n.unbind(t,n.options[t]);n.bind(n.events,e)},resize:function(e){var t=this.getSize(),n=this._size;(e||(t.width>0||t.height>0)&&(!n||t.width!==n.width||t.height!==n.height))&&(this._size=t,this._resize(t,e),this.trigger("resize",t))},getSize:function(){return{width:this.element.width(),height:this.element.height()}},size:function(e){return e?void this.setSize(e):this.getSize()},setSize:a.noop,_resize:a.noop,destroy:function(){var e=this;e.element.removeData(e.name),e.element.removeData(f),e.unbind()},angular:function(){}}),h.DataBoundWidget=h.Widget.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(e){var t=this;t.angular(e,function(){return{elements:t.items(),data:a.map(t.dataItems(),function(e){return{dataItem:e}})}})}}),h.register=function(e,t){var n,r=e.fn.name;t=t||i.ui,t[r]=e,t.roles[r.toLowerCase()]=e,n="getFly"+r,r=o+r,a.fn[r]=function(t){var n,i=this;return t=t||{},typeof t===u?(n=l.call(arguments,1),this.each(function(){var e,s,o=a.data(this,r);if(!o)throw new Error('Cannot call method "'+t+'" of '+r+" before it is initialized");if(e=o[t],typeof e!==c)throw new Error('Cannot find method "'+t+'" of '+r);return s=e.apply(o,n),void 0!==s?(i=s,!1):void 0})):this.each(function(){new e(this,t)}),i},a.fn[r].widget=e,a.fn[n]=function(){return this.data(r)}},h.initWidget=function(e,t,n){var r,o,l,c,d,f,h,p,g;if(n?n.roles&&(n=n.roles):n=i.ui.roles,e=e.nodeType?e:e[0],f=e.getAttribute("data-role")){l=n[f];var v=a(e).data(),_=l.fn.name,m=l?"fly"+_:"";g=new RegExp("^"+m+"$","i");for(var y in v)if(y.match(g)){if(y!==m)return v[y];r=v[y]}if(l){for(p=s.parseOption(e,"dataSource"),t=a.extend({},s.parseEleOptions(e,l.fn.options),t),p&&(typeof p===u?t.dataSource=i.getter(p)(window):t.dataSource=p),c=0,d=l.fn.events.length;d>c;c++)o=l.fn.events[c],h=s.parseOption(e,o),void 0!==h&&(t[o]=i.getter(h)(window));return r?a.isEmptyObject(t)||r.setOptions(t):r=new l(e,t),r}}},i.ui=h,t.exports=h},{"./fly.core":5,"./fly.observable":12,"./fly.utils":17}],17:[function(e,t,n){"use strict";var i=e("./fly.core"),r=i.$,s=i.utils||{},a=({}.toString,/([A-Z])/g),o=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,l=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]*\]$/,u=/^(\+|-?)\d+(\.?)\d*$/;s.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):""},s.now=Date.now||function(){return(new Date).getTime()},s.throttle=function(e,t,n){var i,r,a,o=null,l=0;n||(n={});var u=function(){l=n.leading===!1?0:s.now(),o=null,a=e.apply(i,r),o||(i=r=null)};return function(){var c=s.now();l||n.leading!==!1||(l=c);var d=t-(c-l);return i=this,r=arguments,0>=d||d>t?(o&&(clearTimeout(o),o=null),l=c,
a=e.apply(i,r),o||(i=r=null)):o||n.trailing===!1||(o=setTimeout(u,d)),a}},s.debounce=function(e,t,n){var i,r,a,o,l,u=function(){var c=s.now()-o;t>c&&c>=0?i=setTimeout(u,t-c):(i=null,n||(l=e.apply(a,r),i||(a=r=null)))};return function(){a=this,r=arguments,o=s.now();var c=n&&!i;return i||(i=setTimeout(u,t)),c&&(l=e.apply(a,r),a=r=null),l}},s.isInView=function(e,t){var n=r(e);if(!n.is(":visible"))return!1;var s=i.$win.scrollLeft(),a=i.$win.scrollTop(),o=i.$win.width(),l=i.$win.height(),u=n.width(),c=n.height(),d=n.offset(),f=d.left,h=d.top;return t=r.extend({top:0,left:0},t),h+c>=a&&h-t.top<=a+l&&f+u>=s&&f-t.left<=s+o?!0:!1},s.url=function(e){var t="undefined"==typeof CONTEXTPATH?"":CONTEXTPATH;return e?0==e.indexOf("http://")||0==e.indexOf("https://")||0==e.indexOf("//")||t&&0==e.indexOf(t)?e:t+e:""},s.parseOption=function(e,t){var n;return 0===t.indexOf("data")&&(t=t.substring(4),t=t.charAt(0).toLowerCase()+t.substring(1)),t=t.replace(a,"-$1"),n=e.getAttribute("data-"+t),null===n?n=void 0:"null"===n?n=null:"true"===n?n=!0:"false"===n?n=!1:u.test(n)?n=parseFloat(n):o.test(n)&&!l.test(n)&&(n=new Function("return ("+n+")")()),n},s.parseEleOptions=function(e,t){var n,i,r={};for(n in t)i=s.parseOption(e,n),void 0!==i&&(r[n]=i);return r},s.getByteLen=function(e){for(var t=0,e=e||"",n=e.length,i=0;n>i;i++){var r=e.charCodeAt(i);t+=r>=0&&128>=r?1:2}return t},s.selectRange=function(e,t){var n=this[0]||this;if(n.createTextRange){var i=n.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",e),i.select()}else n.focus(),n.setSelectionRange(e,t);return n},s.post=function(e,t,n){return n=n||"json",r.ajax({url:s.url(e),data:t||{},dataType:n||"json",type:"POST"})},s.get=function(e,t,n){return n=n||"json",r.ajax({url:s.url(e),cache:!1,data:t||{},dataType:n||"json",type:"GET"})},i.top=function(){var e=window,t=function(e){try{var t=window[e].document;t.getElementsByTagName}catch(n){return!1}return window[e].fly&&0===t.getElementsByTagName("frameset").length};return t("top")?e=window.top:t("parent")&&(e=window.parent),e}(),i.destroy=function(e){r(e).find("[data-role]").addBack().each(function(){var e=r(this).data();for(var t in e)0===t.indexOf(i.NS)&&typeof e[t].destroy===FUNCTION&&e[t].destroy()})},i.getComputedStyles=function(e,t){var n,i=document.defaultView,s={};return i&&i.getComputedStyle?(n=i.getComputedStyle(e,""),t&&r.each(t,function(e,t){s[t]=n.getPropertyValue(t)})):(n=e.currentStyle,t&&r.each(t,function(e,t){s[t]=n[t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})]})),r.isEmptyObject(s)&&(s=n),s},i.isScrollable=function(e){return"visible"!=i.getComputedStyles(e,["overflow"]).overflow},i.activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},i.caret=function(e,t,n){var i,s=void 0!==t;if(void 0===n&&(n=t),e[0]&&(e=e[0]),!s||!e.disabled){try{if(void 0!==e.selectionStart)s?(e.focus(),e.setSelectionRange(t,n)):t=[e.selectionStart,e.selectionEnd];else if(document.selection)if(r(e).is(":visible")&&e.focus(),i=e.createTextRange(),s)i.collapse(!0),i.moveStart("character",t),i.moveEnd("character",n-t),i.select();else{var a,o,l=i.duplicate();i.moveToBookmark(document.selection.createRange().getBookmark()),l.setEndPoint("EndToStart",i),a=l.text.length,o=a+i.text.length,t=[a,o]}}catch(u){t=[]}return t}},i.utils=s,t.exports=s},{"./fly.core":5}],18:[function(e,t,n){"use strict";var i=e("./fly.core"),r=e("./fly.utils"),s=e("./fly.calculate"),a=(e("./fly.format"),i.$),o={EMAIL:"^[a-z0-9._%-]+@([a-z0-9-]+\\.)+[a-z]{2,4}$",NUMBER:"^\\-?\\d+(\\.\\d+)?$",URL:"^(http|https|ftp)\\:\\/\\/[a-z0-9\\-\\.]+\\.[a-z]{2,3}(:[a-z0-9]*)?\\/?([a-z0-9\\-\\._\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$",TEL:"^1\\d{10}$",ZIPCODE:"^\\d{6}$"},l={radio:"请选择一个选项",checkbox:"如果要继续，请选中此框",select:"请选择列表中的一项",email:"请输入电子邮件地址",url:"请输入网站地址",tel:"请输入手机号码",number:"请输入数值",date:"请输入日期",pattern:"内容格式不符合要求",empty:"请填写此字段",multiple:"多条数据使用逗号分隔"},u="undefined",c="number",d="function",f="string",h=/\W+$/,p=function(e){var t=a(this),n=a.trim(t.val()),i=e.type||t.attr("type"),r=e.pattern;if(r=r||function(){return t.attr("pattern")}()||function(){return i&&a.map(i.split("|"),function(e){var t=o[e.toUpperCase()];return t?t:void 0}).join("|")}(),""===n||!r)return!0;var s=!!a(t).attr("multiple"),l=new RegExp(r,"i");if(s&&!/^number|range$/i.test(i)){var u=!0;return a.each(n.split(","),function(e,t){t=a.trim(t),u&&!l.test(t)&&(u=!1)}),u}return l.test(n)},g=function(e,t,n){var i=e.closest(".widget");e=i.length?i:e,e.flyTooltip({content:t})},v=function(e){var t=a(this),n=t.val();return e=e||t.attr("placeholder"),"password"!==t.attr("type")&&(n=a.trim(n)),""===n||n===e?!0:!1},_=function(e){var t=a(this);if(!t)return!1;var n=t.val(),i=t.attr("step"),o=t.data("type")||t.attr("type"),l=t.attr("min"),d=t.attr("max");if(e=e||{},typeof e.min!==u&&(l=e.min),typeof e.max!==u&&(d=e.max),typeof e.step!==u&&(i=e.step),typeof e.type!==u&&(o=e.type),o===c){if(typeof l!==u&&l>n)g(t,"值必须大于或等于"+l);else if(typeof d!==u&&n>d)g(t,"值必须小于或等于"+d);else{if(typeof i===u||/^\d+$/.test(s.div(Math.abs(s.sub(n,l||0)),i)))return!1;g(t,"值无效")}t.focus(),t.select()}else if(typeof l!==u&&n.length<l)g(t,"至少输入"+l+"个字符"),t.focus();else{if(!(typeof d!==u&&n.length>d))return!1;g(t,"最多输入"+d+"个字符"),r.selectRange.call(t,d,n.length)}return!0},m=function(e){var t=a(this),n=(t.val(),e.check);return typeof n===d?n.call(t):!0},y=function(e,t,n){var i=a(this),r=e.type,s=e.key||i.data("key"),o=e.title||a.trim(i.closest(".widget").children(".label").text()).replace(/\*/gi,"").replace(/＊/gi,"").replace(/：/gi,"").replace(/:/gi,"");if(a(i).is(":visible"))if("radio"==r||"checkbox"==r)g(i,l[r]),i.focus();else if("select"==t||"empty"==t)g(i,"empty"==t&&o?"您尚未输入"+o:l[t]),i.focus();else if(/^range|number$/i.test(r)&&Number(i.val()))g(i,"值无效"),i.focus(),i.select();else{var u=l[r]||l.pattern;o&&(u="您输入的"+o+"格式不准确"),"number"!=r&&i.attr("multiple")&&(u+="，"+l.multiple),g(i,u),i.focus(),i.select()}else{var c=i.data("target"),d=typeof c==f?a((document.getElementById(c)?"#":".")+c):c,h="您尚未"+(s||("empty"==t?"输入":"选择"))+(!/^radio|checkbox$/i.test(r)&&o||"该项内容");d&&d.length&&g(d,h)}return!1},b=function(e,t,n){if(e=a(e),0===e.length)return!0;t=t||{};var r=t.type||e.data("type")||e.attr("type"),s=e[0].tagName,o=t.required||!!e.attr("required"),l=t.target||e.attr("mind-target"),u=l?a('[mind-accept="'+l+'"]'):null,c=e.attr("name"),d=!0;if(e.is(":disabled")||u&&u.is(":disabled"))return!0;if(r){var f=r.replace(h,"");if(!t.hasTypeNormally&&i.support.html5&&r!=f)try{e[0].type=f}catch(g){}r=f}if("submit"==r||"reset"==r||"file"==r||"image"==r)return!0;if("radio"!=r&&"checkbox"!=r||!o)"select"==s&&o&&!e.val()?d=y.call(e,t,s,n):o&&v.call(e)?(y.call(e,t,!0,n),d=!1):p.call(e,t)?_.call(e,t)?d=!1:m.call(e,t)||(d=!1,e.focus()):(y.call(e,t,s,n),d=!1);else{var b=c?a('input[type="'+r+'"][name="'+c+'"]'):e,w=!1;b.each(function(){return 0==w&&a(this).is(":checked")?void(w=!0):void 0}),0==w&&(d=y.call(b.get(0),r,s,n))}return e.toggleClass("error",!d),d};i.validate=b,t.exports=b},{"./fly.calculate":2,"./fly.core":5,"./fly.format":9,"./fly.utils":17}],19:[function(e,t,n){"use strict";var i={};i=e("./fly.core"),e("./fly.binder"),e("./fly.calculate"),e("./fly.class"),e("./fly.color"),e("./fly.culture"),e("./fly.data"),e("./fly.drag"),e("./fly.format"),e("./fly.list"),e("./fly.model"),e("./fly.observable"),e("./fly.router"),e("./fly.template"),e("./fly.ui"),e("./fly.utils"),e("./fly.validate"),t.exports=i},{"./fly.binder":1,"./fly.calculate":2,"./fly.class":3,"./fly.color":4,"./fly.core":5,"./fly.culture":6,"./fly.data":7,"./fly.drag":8,"./fly.format":9,"./fly.list":10,"./fly.model":11,"./fly.observable":12,"./fly.router":14,"./fly.template":15,"./fly.ui":16,"./fly.utils":17,"./fly.validate":18}]},{},[19]);